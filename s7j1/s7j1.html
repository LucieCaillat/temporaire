<!DOCTYPE html>
<html class="loaded" lang="fr"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<script type="text/javascript" async="" src="s7j1_fichiers/insight.js"></script><script type="text/javascript" src="s7j1_fichiers/NRJS-71f55aa980e498e276b"></script><script src="s7j1_fichiers/nr-1212.js"></script><script type="text/javascript" async="" src="s7j1_fichiers/gtm_002.js"></script><script type="text/javascript" src="s7j1_fichiers/commons.js" async="" status="loaded"></script><script type="text/javascript" src="s7j1_fichiers/google-tag-manager.js" async="" status="loaded"></script><script type="text/javascript" async="" src="s7j1_fichiers/analytics.js"></script><script type="text/javascript" async="" src="s7j1_fichiers/mixpanel-2-latest.js"></script><script type="text/javascript" async="" src="s7j1_fichiers/conversion_async.js"></script><script type="text/javascript" async="" src="s7j1_fichiers/analytics_002.js"></script><script src="s7j1_fichiers/conversations-embed.js" type="text/javascript" id="hubspot-messages-loader" data-loader="hs-scriptloader" data-hsjs-portal="9310539" data-hsjs-env="prod" data-hsjs-hublet="na1"></script><script src="s7j1_fichiers/9310539_003.js" type="text/javascript" id="hs-analytics"></script><script src="s7j1_fichiers/9310539_002.js" type="text/javascript" id="cookieBanner-9310539" data-cookieconsent="ignore" data-hs-ignore="true" data-loader="hs-scriptloader" data-hsjs-portal="9310539" data-hsjs-env="prod" data-hsjs-hublet="na1"></script><script src="s7j1_fichiers/fb.js" type="text/javascript" id="hs-ads-pixel-9310539" data-ads-portal-id="9310539" data-ads-env="prod" data-loader="hs-scriptloader" data-hsjs-portal="9310539" data-hsjs-env="prod" data-hsjs-hublet="na1"></script><script src="s7j1_fichiers/collectedforms.js" type="text/javascript" id="CollectedForms-9310539" crossorigin="anonymous" data-leadin-portal-id="9310539" data-leadin-env="prod" data-loader="hs-scriptloader" data-hsjs-portal="9310539" data-hsjs-env="prod" data-hsjs-hublet="na1"></script><script src="s7j1_fichiers/leadflows.js" type="text/javascript" id="LeadFlows-9310539" crossorigin="anonymous" data-leadin-portal-id="9310539" data-leadin-env="prod" data-loader="hs-scriptloader" data-hsjs-portal="9310539" data-hsjs-env="prod" data-hsjs-hublet="na1"></script><script async="" crossorigin="anonymous" src="s7j1_fichiers/fs.js"></script><script src="s7j1_fichiers/773401719499556.js" async=""></script><script async="" src="s7j1_fichiers/fbevents.js"></script><script async="" src="s7j1_fichiers/gtm.js"></script><script>window.NREUM||(NREUM={});NREUM.info={"beacon":"bam.nr-data.net","errorBeacon":"bam.nr-data.net","licenseKey":"NRJS-71f55aa980e498e276b","applicationID":"576835834","transactionName":"dgpYEBRYDg9XQh8AA0YNVAsHRQZMVlFJF01GDVkT","queueTime":0,"applicationTime":171,"agent":""}</script>
<script>(window.NREUM||(NREUM={})).init={ajax:{deny_list:["bam.nr-data.net"]}};(window.NREUM||(NREUM={})).loader_config={licenseKey:"NRJS-71f55aa980e498e276b",applicationID:"576835834"};window.NREUM||(NREUM={}),__nr_require=function(t,e,n){function r(n){if(!e[n]){var i=e[n]={exports:{}};t[n][0].call(i.exports,function(e){var i=t[n][1][e];return r(i||e)},i,i.exports)}return e[n].exports}if("function"==typeof __nr_require)return __nr_require;for(var i=0;i<n.length;i++)r(n[i]);return r}({1:[function(t,e,n){function r(){}function i(t,e,n,r){return function(){return s.recordSupportability("API/"+e+"/called"),o(t+e,[u.now()].concat(c(arguments)),n?null:this,r),n?void 0:this}}var o=t("handle"),a=t(10),c=t(11),f=t("ee").get("tracer"),u=t("loader"),s=t(4),d=NREUM;"undefined"==typeof window.newrelic&&(newrelic=d);var p=["setPageViewName","setCustomAttribute","setErrorHandler","finished","addToTrace","inlineHit","addRelease"],l="api-",v=l+"ixn-";a(p,function(t,e){d[e]=i(l,e,!0,"api")}),d.addPageAction=i(l,"addPageAction",!0),d.setCurrentRouteName=i(l,"routeName",!0),e.exports=newrelic,d.interaction=function(){return(new r).get()};var m=r.prototype={createTracer:function(t,e){var n={},r=this,i="function"==typeof e;return o(v+"tracer",[u.now(),t,n],r),function(){if(f.emit((i?"":"no-")+"fn-start",[u.now(),r,i],n),i)try{return e.apply(this,arguments)}catch(t){throw f.emit("fn-err",[arguments,this,t],n),t}finally{f.emit("fn-end",[u.now()],n)}}}};a("actionText,setName,setAttribute,save,ignore,onEnd,getContext,end,get".split(","),function(t,e){m[e]=i(v,e)}),newrelic.noticeError=function(t,e){"string"==typeof t&&(t=new Error(t)),s.recordSupportability("API/noticeError/called"),o("err",[t,u.now(),!1,e])}},{}],2:[function(t,e,n){function r(t){if(NREUM.init){for(var e=NREUM.init,n=t.split("."),r=0;r<n.length-1;r++)if(e=e[n[r]],"object"!=typeof e)return;return e=e[n[n.length-1]]}}e.exports={getConfiguration:r}},{}],3:[function(t,e,n){var r=!1;try{var i=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("testPassive",null,i),window.removeEventListener("testPassive",null,i)}catch(o){}e.exports=function(t){return r?{passive:!0,capture:!!t}:!!t}},{}],4:[function(t,e,n){function r(t,e){var n=[a,t,{name:t},e];return o("storeMetric",n,null,"api"),n}function i(t,e){var n=[c,t,{name:t},e];return o("storeEventMetrics",n,null,"api"),n}var o=t("handle"),a="sm",c="cm";e.exports={constants:{SUPPORTABILITY_METRIC:a,CUSTOM_METRIC:c},recordSupportability:r,recordCustom:i}},{}],5:[function(t,e,n){function r(){return c.exists&&performance.now?Math.round(performance.now()):(o=Math.max((new Date).getTime(),o))-a}function i(){return o}var o=(new Date).getTime(),a=o,c=t(12);e.exports=r,e.exports.offset=a,e.exports.getLastTimestamp=i},{}],6:[function(t,e,n){function r(t){return!(!t||!t.protocol||"file:"===t.protocol)}e.exports=r},{}],7:[function(t,e,n){function r(t,e){var n=t.getEntries();n.forEach(function(t){"first-paint"===t.name?p("timing",["fp",Math.floor(t.startTime)]):"first-contentful-paint"===t.name&&p("timing",["fcp",Math.floor(t.startTime)])})}function i(t,e){var n=t.getEntries();if(n.length>0){var r=n[n.length-1];if(f&&f<r.startTime)return;p("lcp",[r])}}function o(t){t.getEntries().forEach(function(t){t.hadRecentInput||p("cls",[t])})}function a(t){if(t instanceof g&&!y){var e=Math.round(t.timeStamp),n={type:t.type};e<=l.now()?n.fid=l.now()-e:e>l.offset&&e<=Date.now()?(e-=l.offset,n.fid=l.now()-e):e=l.now(),y=!0,p("timing",["fi",e,n])}}function c(t){"hidden"===t&&(f=l.now(),p("pageHide",[f]))}if(!("init"in NREUM&&"page_view_timing"in NREUM.init&&"enabled"in NREUM.init.page_view_timing&&NREUM.init.page_view_timing.enabled===!1)){var f,u,s,d,p=t("handle"),l=t("loader"),v=t(9),m=t(3),g=NREUM.o.EV;if("PerformanceObserver"in window&&"function"==typeof window.PerformanceObserver){u=new PerformanceObserver(r);try{u.observe({entryTypes:["paint"]})}catch(h){}s=new PerformanceObserver(i);try{s.observe({entryTypes:["largest-contentful-paint"]})}catch(h){}d=new PerformanceObserver(o);try{d.observe({type:"layout-shift",buffered:!0})}catch(h){}}if("addEventListener"in document){var y=!1,w=["click","keydown","mousedown","pointerdown","touchstart"];w.forEach(function(t){document.addEventListener(t,a,m(!1))})}v(c)}},{}],8:[function(t,e,n){function r(t,e){if(!i)return!1;if(t!==i)return!1;if(!e)return!0;if(!o)return!1;for(var n=o.split("."),r=e.split("."),a=0;a<r.length;a++)if(r[a]!==n[a])return!1;return!0}var i=null,o=null,a=/Version\/(\S+)\s+Safari/;if(navigator.userAgent){var c=navigator.userAgent,f=c.match(a);f&&c.indexOf("Chrome")===-1&&c.indexOf("Chromium")===-1&&(i="Safari",o=f[1])}e.exports={agent:i,version:o,match:r}},{}],9:[function(t,e,n){function r(t){function e(){t(c&&document[c]?document[c]:document[o]?"hidden":"visible")}"addEventListener"in document&&a&&document.addEventListener(a,e,i(!1))}var i=t(3);e.exports=r;var o,a,c;"undefined"!=typeof document.hidden?(o="hidden",a="visibilitychange",c="visibilityState"):"undefined"!=typeof document.msHidden?(o="msHidden",a="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(o="webkitHidden",a="webkitvisibilitychange",c="webkitVisibilityState")},{}],10:[function(t,e,n){function r(t,e){var n=[],r="",o=0;for(r in t)i.call(t,r)&&(n[o]=e(r,t[r]),o+=1);return n}var i=Object.prototype.hasOwnProperty;e.exports=r},{}],11:[function(t,e,n){function r(t,e,n){e||(e=0),"undefined"==typeof n&&(n=t?t.length:0);for(var r=-1,i=n-e||0,o=Array(i<0?0:i);++r<i;)o[r]=t[e+r];return o}e.exports=r},{}],12:[function(t,e,n){e.exports={exists:"undefined"!=typeof window.performance&&window.performance.timing&&"undefined"!=typeof window.performance.timing.navigationStart}},{}],ee:[function(t,e,n){function r(){}function i(t){function e(t){return t&&t instanceof r?t:t?u(t,f,a):a()}function n(n,r,i,o,a){if(a!==!1&&(a=!0),!l.aborted||o){t&&a&&t(n,r,i);for(var c=e(i),f=m(n),u=f.length,s=0;s<u;s++)f[s].apply(c,r);var p=d[w[n]];return p&&p.push([b,n,r,c]),c}}function o(t,e){y[t]=m(t).concat(e)}function v(t,e){var n=y[t];if(n)for(var r=0;r<n.length;r++)n[r]===e&&n.splice(r,1)}function m(t){return y[t]||[]}function g(t){return p[t]=p[t]||i(n)}function h(t,e){l.aborted||s(t,function(t,n){e=e||"feature",w[n]=e,e in d||(d[e]=[])})}var y={},w={},b={on:o,addEventListener:o,removeEventListener:v,emit:n,get:g,listeners:m,context:e,buffer:h,abort:c,aborted:!1};return b}function o(t){return u(t,f,a)}function a(){return new r}function c(){(d.api||d.feature)&&(l.aborted=!0,d=l.backlog={})}var f="nr@context",u=t("gos"),s=t(10),d={},p={},l=e.exports=i();e.exports.getOrSetContext=o,l.backlog=d},{}],gos:[function(t,e,n){function r(t,e,n){if(i.call(t,e))return t[e];var r=n();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!1}),r}catch(o){}return t[e]=r,r}var i=Object.prototype.hasOwnProperty;e.exports=r},{}],handle:[function(t,e,n){function r(t,e,n,r){i.buffer([t],r),i.emit(t,e,n)}var i=t("ee").get("handle");e.exports=r,r.ee=i},{}],id:[function(t,e,n){function r(t){var e=typeof t;return!t||"object"!==e&&"function"!==e?-1:t===window?0:a(t,o,function(){return i++})}var i=1,o="nr@id",a=t("gos");e.exports=r},{}],loader:[function(t,e,n){function r(){if(!T++){var t=P.info=NREUM.info,e=g.getElementsByTagName("script")[0];if(setTimeout(u.abort,3e4),!(t&&t.licenseKey&&t.applicationID&&e))return u.abort();f(O,function(e,n){t[e]||(t[e]=n)});var n=a();c("mark",["onload",n+P.offset],null,"api"),c("timing",["load",n]);var r=g.createElement("script");0===t.agent.indexOf("http://")||0===t.agent.indexOf("https://")?r.src=t.agent:r.src=v+"://"+t.agent,e.parentNode.insertBefore(r,e)}}function i(){"complete"===g.readyState&&o()}function o(){c("mark",["domContent",a()+P.offset],null,"api")}var a=t(5),c=t("handle"),f=t(10),u=t("ee"),s=t(8),d=t(6),p=t(2),l=t(3),v=p.getConfiguration("ssl")===!1?"http":"https",m=window,g=m.document,h="addEventListener",y="attachEvent",w=m.XMLHttpRequest,b=w&&w.prototype,E=!d(m.location);NREUM.o={ST:setTimeout,SI:m.setImmediate,CT:clearTimeout,XHR:w,REQ:m.Request,EV:m.Event,PR:m.Promise,MO:m.MutationObserver};var x=""+location,O={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-1212.min.js"},M=w&&b&&b[h]&&!/CriOS/.test(navigator.userAgent),P=e.exports={offset:a.getLastTimestamp(),now:a,origin:x,features:{},xhrWrappable:M,userAgent:s,disabled:E};if(!E){t(1),t(7),g[h]?(g[h]("DOMContentLoaded",o,l(!1)),m[h]("load",r,l(!1))):(g[y]("onreadystatechange",i),m[y]("onload",r)),c("mark",["firstbyte",a.getLastTimestamp()],null,"api");var T=0}},{}],"wrap-function":[function(t,e,n){function r(t,e){function n(e,n,r,f,u){function nrWrapper(){var o,a,s,p;try{a=this,o=d(arguments),s="function"==typeof r?r(o,a):r||{}}catch(l){i([l,"",[o,a,f],s],t)}c(n+"start",[o,a,f],s,u);try{return p=e.apply(a,o)}catch(v){throw c(n+"err",[o,a,v],s,u),v}finally{c(n+"end",[o,a,p],s,u)}}return a(e)?e:(n||(n=""),nrWrapper[p]=e,o(e,nrWrapper,t),nrWrapper)}function r(t,e,r,i,o){r||(r="");var c,f,u,s="-"===r.charAt(0);for(u=0;u<e.length;u++)f=e[u],c=t[f],a(c)||(t[f]=n(c,s?f+r:r,i,f,o))}function c(n,r,o,a){if(!v||e){var c=v;v=!0;try{t.emit(n,r,o,e,a)}catch(f){i([f,n,r,o],t)}v=c}}return t||(t=s),n.inPlace=r,n.flag=p,n}function i(t,e){e||(e=s);try{e.emit("internal-error",t)}catch(n){}}function o(t,e,n){if(Object.defineProperty&&Object.keys)try{var r=Object.keys(t);return r.forEach(function(n){Object.defineProperty(e,n,{get:function(){return t[n]},set:function(e){return t[n]=e,e}})}),e}catch(o){i([o],n)}for(var a in t)l.call(t,a)&&(e[a]=t[a]);return e}function a(t){return!(t&&t instanceof Function&&t.apply&&!t[p])}function c(t,e){var n=e(t);return n[p]=t,o(t,n,s),n}function f(t,e,n){var r=t[e];t[e]=c(r,n)}function u(){for(var t=arguments.length,e=new Array(t),n=0;n<t;++n)e[n]=arguments[n];return e}var s=t("ee"),d=t(11),p="nr@original",l=Object.prototype.hasOwnProperty,v=!1;e.exports=r,e.exports.wrapFunction=c,e.exports.wrapInPlace=f,e.exports.argsToArray=u},{}]},{},["loader"]);</script>
    <meta name="viewport" content="width=device-width, user-scalable=no">

    <meta name="csrf-param" content="authenticity_token">
<meta name="csrf-token" content="C3VFiWSGgahPatczdlOat5z6nDeo3xb9XAGuJwCtPeV45Wuty2bWmYc7oeK2QiMrOKRvAYZ+87pFpukTSfuZeQ==">
    <title>Le tableau de bord | The Hacking Project</title>
<meta name="description" content="Nous cassons les codes de l'√©ducation, vous apprenez d'o√π vous voulez, en communaut√©.">
<meta name="robots" content="noindex, nofollow">
<meta property="og:title" content="Le tableau de bord">
<meta property="og:site_name" content="The Hacking Project">
<meta name="url" content="https://www.thehackingproject.org/fr/dashboard/courses/1/weeks/4/days/1">
<meta name="image" content="https://www.thehackingproject.org/packs/images/logo/20210910-THP-Logo_color_transparent-31229dd881904e010092de63be97cdfa.png">


    <link rel="apple-touch-icon" sizes="180x180" href="https://www.thehackingproject.org/assets/favicon/apple-touch-icon-c01aaccf467f7cc3d79bbce743d60779f5b833fdc4500cebd07a5e11a07a5c31.png">
<link rel="apple-touch-icon" sizes="120x120" href="https://www.thehackingproject.org/assets/favicon/apple-touch-icon-120x120-precomposed-372de868f08319961b72ba7e3b1ed7121e75e29c8294334cb2c911409ea18131.png">
<link rel="apple-touch-icon" sizes="120x120" href="https://www.thehackingproject.org/assets/favicon/apple-touch-icon-120x120-372de868f08319961b72ba7e3b1ed7121e75e29c8294334cb2c911409ea18131.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://www.thehackingproject.org/assets/favicon/favicon-32x32-804b12d1c41c60fe721477b7c3b0a32811dc610580dd40ac92f1cc04cbd05ca4.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://www.thehackingproject.org/assets/favicon/favicon-16x16-d96ba65e5785d32474df9ebc6fbfd5442c751d527b10981a474bc3b7a4079d01.png">
<link rel="manifest" href="https://www.thehackingproject.org/assets/favicon/manifest-cf975201fd8ac78a1f1a203357573d50031f1cc33436d099743df6428b8a38a2.json">
<link rel="mask-icon" href="https://www.thehackingproject.org/assets/favicon/safari-pinned-tab-8af1cfcf7525ccdccb490f9f5adad396653a4969b419e0a9a9d3a1088140a912.svg" color="#5bbad5">
<link rel="shortcut icon" href="https://www.thehackingproject.org/assets/favicon/favicon-cbf10361dc90b277565960736d4897fddef5468bff6299811ea9498459d56d21.ico">
<meta name="msapplication-config" content="/assets/favicon/browserconfig-dab38db6040ef54ac56e91fdd77e3d7b06746a634e87b68c99b59b216cb8611a.xml">
<meta name="theme-color" content="#ffffff">

    <link rel="stylesheet" media="screen" href="s7j1_fichiers/vendor-dab9e12f0ba58215899de05f149caa5f.css">
    <link rel="stylesheet" media="screen" href="s7j1_fichiers/dashboard-4ab6ba9737cbfc4c38b17a9a4de7833a.css">
    <link rel="stylesheet" media="screen" href="s7j1_fichiers/dashboard-ea5a94b9045ccb8d8ce8974b71b640603915dc183d5907c643.css">
    <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async="" src="s7j1_fichiers/js.js"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-105991867-1');
  </script>
<!-- End Google Analytics -->

<!-- Google Tag Manager -->
<script>
  (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer',"GTM-P8XRQ3M");
</script>
<!-- End Google Tag Manager -->

<!-- Facebook Pixel Code -->
    <script>
        !function(f,b,e,v,n,t,s)
        {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
        n.callMethod.apply(n,arguments):n.queue.push(arguments)};
        if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
        n.queue=[];t=b.createElement(e);t.async=!0;
        t.src=v;s=b.getElementsByTagName(e)[0];
        s.parentNode.insertBefore(t,s)}(window,document,'script',
        'https://connect.facebook.net/en_US/fbevents.js');
         fbq('init', '773401719499556');
        fbq('track', 'PageView');
    </script>
    <noscript>
     <img height="1" width="1"
    src="https://www.facebook.com/tr?id=773401719499556&ev=PageView
    &noscript=1"/>
    </noscript>
<!-- End Facebook Pixel Code -->

<script>
window['_fs_debug'] = false;
window['_fs_host'] = 'fullstory.com';
window['_fs_script'] = 'edge.fullstory.com/s/fs.js';
window['_fs_org'] = '14AEET';
window['_fs_namespace'] = 'FS';
(function(m,n,e,t,l,o,g,y){
    if (e in m) {if(m.console && m.console.log) { m.console.log('FullStory namespace conflict. Please set window["_fs_namespace"].');} return;}
    g=m[e]=function(a,b,s){g.q?g.q.push([a,b,s]):g._api(a,b,s);};g.q=[];
    o=n.createElement(t);o.async=1;o.crossOrigin='anonymous';o.src='https://'+_fs_script;
    y=n.getElementsByTagName(t)[0];y.parentNode.insertBefore(o,y);
    g.identify=function(i,v,s){g(l,{uid:i},s);if(v)g(l,v,s)};g.setUserVars=function(v,s){g(l,v,s)};g.event=function(i,v,s){g('event',{n:i,p:v},s)};
    g.anonymize=function(){g.identify(!!0)};
    g.shutdown=function(){g("rec",!1)};g.restart=function(){g("rec",!0)};
    g.log = function(a,b){g("log",[a,b])};
    g.consent=function(a){g("consent",!arguments.length||a)};
    g.identifyAccount=function(i,v){o='account';v=v||{};v.acctId=i;g(o,v)};
    g.clearUserCookie=function(){};
    g.setVars=function(n, p){g('setVars',[n,p]);};
    g._w={};y='XMLHttpRequest';g._w[y]=m[y];y='fetch';g._w[y]=m[y];
    if(m[y])m[y]=function(){return g._w[y].apply(this,arguments)};
    g._v="1.3.0";
})(window,document,window['_fs_namespace'],'script','user');
</script>
<!-- Start of HubSpot Embed Code -->
<script async="" defer="defer" id="hs-script-loader" src="s7j1_fichiers/9310539.js" type="text/javascript"></script>
<!-- End of HubSpot Embed Code -->


    <script src="s7j1_fichiers/thp-3cc5aa6fdf57842a7b6c714621cc7f2d3d31b51cb700b1de4e795d773.js"></script>
    <script src="s7j1_fichiers/manifest-1613feea780cfc5342f4.js"></script>
    <script src="s7j1_fichiers/vendor-ff3cb5540e737de52c97.js"></script>
    <script src="s7j1_fichiers/dashboard-25875e14460b4458b1bccffaa93d4a8cbee9691b06d54976fde.js"></script>

    <link href="s7j1_fichiers/css.css" rel="stylesheet">
  <script src="s7j1_fichiers/a"></script></head>

  <body class="vertical-layout 2-columns fixed-navbar menu-hide vertical-overlay-menu" data-open="click" data-menu="vertical-menu" data-color="bg-gradient-x-primary-blue" data-col="2-columns" data-thp-controller="days" data-thp-action="show" data-thp-layout="dashboard"><style type="text/css">html.hs-messages-widget-open.hs-messages-mobile,html.hs-messages-widget-open.hs-messages-mobile body{overflow:hidden!important;position:relative!important}html.hs-messages-widget-open.hs-messages-mobile body{height:100%!important;margin:0!important}#hubspot-messages-iframe-container{display:initial!important;z-index:2147483647;position:fixed!important;bottom:0!important}#hubspot-messages-iframe-container.widget-align-left{left:0!important}#hubspot-messages-iframe-container.widget-align-right{right:0!important}#hubspot-messages-iframe-container.internal{z-index:1016}#hubspot-messages-iframe-container.internal iframe{min-width:108px}#hubspot-messages-iframe-container .shadow-container{display:initial!important;z-index:-1;position:absolute;width:0;height:0;bottom:0;content:""}#hubspot-messages-iframe-container .shadow-container.internal{display:none!important}#hubspot-messages-iframe-container .shadow-container.active{width:400px;height:400px}#hubspot-messages-iframe-container iframe{display:initial!important;width:100%!important;height:100%!important;border:none!important;position:absolute!important;bottom:0!important;right:0!important;background:transparent!important}</style>
    <!-- Google Tag Manager (noscript) -->
<noscript>
<iframe height='0' src='https://www.googletagmanager.com/ns.html?id=GTM-P8XRQ3M' style='display:none;visibility:hidden' width='0'></iframe>
</noscript>
<!-- End Google Tag Manager (noscript) -->



    <nav class="header-navbar navbar-expand-md navbar navbar-with-menu navbar-without-dd-arrow fixed-top navbar-semi-light" style="padding:0;">
<div class="navbar-wrapper">
<div class="navbar-container content">
<div class="collapse navbar-collapse show" id="navbar-mobile">
<ul class="nav navbar-nav mr-auto float-left">
<li class="nav-item mobile-menu d-md-none mr-auto">
<a class="nav-link nav-menu-main menu-toggle hidden-xs" href="#">
<i class="ft-menu font-large-1"></i>
</a>
</li>
<li class="nav-item d-none d-md-block">
<a class="nav-link nav-menu-main menu-toggle hidden-xs" href="#">
<i class="ft-menu"></i>
</a>
</li>
</ul>
<ul class="nav navbar-nav float-right">
<li class="dropdown dropdown-user nav-item">
<a class="dropdown-toggle nav-link dropdown-user-link" data-toggle="dropdown" href="#">
<span class="avatar avatar-online">

<img alt="avatar" style="max-height: 40px!important; width: auto" class="rounded-circle img-border" src="s7j1_fichiers/default_profile-a3318a5e66467f9958f16a172f9d15d6.jpg">

</span>
</a>
<div class="dropdown-menu dropdown-menu-right">
<div class="arrow_box_right">
<a class="dropdown-toggle nav-link dropdown-user-link" href="https://www.thehackingproject.org/fr/dashboard/profile/user"><span class="avatar avatar-online pt-0">

<img alt="avatar" style="max-height: 40px!important; width: auto" class="rounded-circle img-border" src="s7j1_fichiers/default_profile-a3318a5e66467f9958f16a172f9d15d6.jpg">

</span>
<span class="user-name text-bold-700 ml-1 text-dark">
Lucie
</span>
</a><div class="dropdown-divider"></div>
<a class="dropdown-item" href="https://www.thehackingproject.org/fr/dashboard/profile/user/edit"><i class="ft-edit"></i>√âditer profil
</a><div class="dropdown-divider"></div>
<a class="dropdown-item" href="https://www.thehackingproject.org/fr/dashboard/profile/user/edit?edit=danger"><i class="ft-alert-triangle"></i>Zone √† risques
</a><div class="dropdown-divider"></div>
<a class="dropdown-item" rel="nofollow" data-method="delete" href="https://www.thehackingproject.org/users/sign_out?locale=fr"><i class="ft-power"></i>
D√©connexion
</a></div>
</div>
</li>
</ul>
</div>
</div>
</div>
</nav>

      <div class="main-menu menu-fixed menu-light menu-accordion menu-shadow" data-scroll-to-active="true">
<div class="navbar-header">
<ul class="nav navbar-nav flex-row">
<li class="nav-item mr-auto">
<a class="navbar-brand" href="https://www.thehackingproject.org/?locale=fr"><h3 class="brand-text">The Hacking Project</h3>
</a></li>
<li class="nav-item d-md-none">
<a class="nav-link close-navbar">
<i class="ft-x"></i>
</a>
</li>
</ul>
</div>
<div class="main-menu-content">
<ul class="navigation navigation-main" data-menu="menu-navigation" id="main-menu-navigation">
<li class="nav-item">
<a href="https://www.thehackingproject.org/fr/dashboard"><i class="ft-calendar"></i>
<span class="menu-title" data-i18n="">
Aujourd'hui
</span>
</a></li>
<li class="nav-item">
<a href="https://www.thehackingproject.org/fr/dashboard/dashboard"><i class="ft-monitor"></i>
<span class="menu-title" data-i18n="">
Mon dashboard
</span>
</a></li>
<li class="nav-item has-sub">
<a href="#"><i class="fas fa-user-graduate"></i>
<span class="menu-title" data-i18n="">
Mon inscription
</span>
</a><ul class="menu-content">
<li>
<a href="https://www.thehackingproject.org/parcours?locale=fr">Choisir un parcours</a>
</li>
<li>
<a href="https://www.thehackingproject.org/fr/dashboard/profile/curriculum_subscriptions/new">Nouveau parcours</a>
</li>
<li>
<a href="https://www.thehackingproject.org/fr/dashboard/profile/curriculum_subscriptions/7209/edit">Changer parcours</a>
</li>
<li>
<a href="https://www.thehackingproject.org/fr/dashboard/modalites">Modalit√©s</a>
</li>
</ul>
</li>
<li class="nav-item">
<a href="https://www.thehackingproject.org/fr/dashboard/certifications"><i class="fa ft-download"></i>
<span class="menu-title" data-i18n="">
Documents
</span>
</a></li>
<br>
<li>
<a href="https://www.thehackingproject.org/fr/dashboard/help"><i class="fa ft-help-circle"></i>
<span class="menu-title" data-i18n="">
Aide
</span>
</a></li>
</ul>
</div>
</div>



    <div class="app-content content">
      <div class="content-wrapper">
        <div class="content-wrapper-before"></div>
        <div class="content-header row"></div>
        <div class="container">
<div class="row">
<div class="col-12">
<ol class="breadcrumb">
<li class="breadcrumb-item">
<a href="https://www.thehackingproject.org/fr/dashboard/dashboard">Dashboard</a>
</li>
<li class="breadcrumb-item">
<a href="https://www.thehackingproject.org/fr/dashboard/courses/1">Fullstack web</a>
</li>
<li class="breadcrumb-item">
<a href="https://www.thehackingproject.org/fr/dashboard/courses/1/weeks/4">Rails avanc√©</a>
</li>
<li class="breadcrumb-item active">
Mailer et √©v√©nements
</li>
</ol>
</div>
</div>
<!-- / PARTIAL FOR FREE MOUSSES -->
<!-- / PARTIAL FOR NEXT -->
<div class="row">
<div class="col-12">
<div class="card">
<div class="card-body">
<div class="row">
<div class="col-12 col-xl-12 text-center mb-3">
<h2 class="mb-2">
Rails avanc√©
</h2>
<h3>
Mailer et √©v√©nements
</h3>
<h4>

</h4>
<h5>
Nous allons te montrer comment te servir du mailer de Rails, qui permet 
d'envoyer des emails. On te donnera les bonnes astuces pour que ton 
mailer fonctionne en production.
</h5>
</div>
<div class="col-12 col-xl-12 timeline-left" id="activity">
<div class="timeline pt-2">
<ul class="list-unstyled base-timeline activity-timeline">
<li>
<div class="timeline-icon bg-primary">
<i class="ft-map-pin font-medium-1"></i>
</div>
<div class="act-time">
Lundi
</div>
<div class="base-timeline-info">
<div class="text-dark">

Mailer et √©v√©nements
</div>
</div>
<small class="text-muted">
Nous allons te montrer comment te servir du mailer de Rails, qui permet 
d'envoyer des emails. On te donnera les bonnes astuces pour que ton 
mailer fonctionne en production.
</small>
</li>
<li>
<a href="https://www.thehackingproject.org/fr/dashboard/courses/1/weeks/4/days/2"><div class="timeline-icon bg-dark">
<i class="ft-check font-medium-1"></i>
</div>
</a><div class="act-time">
<a href="https://www.thehackingproject.org/fr/dashboard/courses/1/weeks/4/days/2">Mardi
</a></div>
<div class="base-timeline-info">
<div class="text-dark">
<i class="fa fa-rocket text-danger" data-placement="bottom" data-toggle="tooltip" title="" data-original-title="Projet √† rendre ce jour-l√†"></i>

Devise
</div>
</div>
<small class="text-muted">
D√©couverte de Devise: G√©rer des utilisateurs tr√®s facilement
</small>
</li>
<li>
<a href="https://www.thehackingproject.org/fr/dashboard/courses/1/weeks/4/days/3"><div class="timeline-icon bg-dark">
<i class="ft-check font-medium-1"></i>
</div>
</a><div class="act-time">
<a href="https://www.thehackingproject.org/fr/dashboard/courses/1/weeks/4/days/3">Mercredi
</a></div>
<div class="base-timeline-info">
<div class="text-dark">
<i class="fa fa-pencil text-success" data-placement="bottom" data-toggle="tooltip" title="" data-original-title="Corrections cette journ√©e l√†"></i>

Services et API 
</div>
</div>
<small class="text-muted">
Ce jour l√† va se couper en deux parties : - tu vas commencer par 
d√©couvrir comment ins√©rer de mani√®re propre tes programmes de Plain Old 
Ruby Object (PORO) qui n'ont rien √† voir avec Rails : les services - 
ensuite tu vas jouer avec des APIs pour ins√©rer des fonctionnalit√©s tr√®s
 pratique comme le paiement ou la localisation.
</small>
</li>
<li>
<a href="https://www.thehackingproject.org/fr/dashboard/courses/1/weeks/4/days/4"><div class="timeline-icon bg-dark">
<i class="ft-calendar font-medium-1"></i>
</div>
</a><div class="act-time">
<a href="https://www.thehackingproject.org/fr/dashboard/courses/1/weeks/4/days/4">Jeudi
</a></div>
<div class="base-timeline-info">
<div class="text-dark">

Asset Pipeline &amp; Active Storage
</div>
</div>
<small class="text-muted">
Tu vas voir deux √©l√©ments importants qui vont bien ensemble : nous te 
montrerons l'Asset Pipeline qui te donnera la possibilit√© d'afficher des
 images et de jouer avec le CSS et JavaScript de mani√®re avanc√©e. 
Ensuite, gr√¢ce √† Active Storage, tu vas savoir comment g√©rer l'upload de
 fichiers (notamment d'images) dans Rails.
</small>
</li>
<li>
<a href="https://www.thehackingproject.org/fr/dashboard/courses/1/weeks/4/days/5"><div class="timeline-icon bg-dark">
<i class="ft-calendar font-medium-1"></i>
</div>
</a><div class="act-time">
<a href="https://www.thehackingproject.org/fr/dashboard/courses/1/weeks/4/days/5">Vendredi
</a></div>
<div class="base-timeline-info">
<div class="text-dark">

Interface administrateur
</div>
</div>
<small class="text-muted">
Tu vas voir comment faire une belle interface administrateur pour g√©rer tes utilisateurs üòà
</small>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>

<!-- Les fameuses corrections qui n'arrivent que les jours concern√©s -->
<div class="row">
<div class="col-12">
<div class="card">
<div class="card-header" style="border-top: 3px solid #5E66E5">
<h1>
Ressource : 
Avant de commencer cette 6√®me semaine
</h1>
<a class="heading-elements-toggle">
<i class="la la-ellipsis-v font-medium-3"></i>
</a>
<div class="heading-elements">
<ul class="list-inline mb-0">
<li>
<a href="https://www.thehackingproject.org/fr/dashboard/courses/1/lessons/291/lesson_submissions/new"><i class="ft-edit" data-original-title="Proposer une am√©lioration" data-placement="top" data-toggle="tooltip"></i>
</a></li>
<li>
<a data-action="collapse">
<i class="ft-minus"></i>
</a>
</li>
<li>
<a data-action="expand">
<i class="ft-maximize"></i>
</a>
</li>
</ul>
</div>
</div>
<div class="card-content collapse show">
<div class="card-body">
<div class="tab-pane active" id="home1" role="tabpanel">
<h3>1. Introduction</h3>
<p>Pfiou, la 5√®me semaine est pass√©e ! Bien jou√© üí™ <br>
Maintenant, projettons nous sur la semaine √† venir.</p>

<h3>2. Cette semaine</h3>
<p>On t'avait pas menti hein ? La 5√®me semaine est un peu rude mais √† ce
 stade, tu dois savoir, en une journ√©e, cr√©er une app Rails, la faire 
jouer avec une BDD, et voire m√™me la mettre en ligne ! C'est assez fou 
je trouve.</p>

<p>Durant cette 6√®me semaine, on va te pr√©senter plusieurs 
fonctionnalit√©s tr√®s courantes d'un site web et t'expliquer comment 
facilement les impl√©menter dans Rails. √áa ira de l'envoi automatique 
d‚Äôe-mails, √† la mise en place d'un syst√®me clef-en-main pour 
authentifier tes utilisateurs, en passant par l'upload de fichier.</p>

<p>Pour ceux qui ont d√©j√† beaucoup ram√© üö£ la semaine pass√©e et qui 
n'ont pas l'impression d'√™tre tr√®s solides sur Rails, cela va faire 
beaucoup d'information en plus. Aussi, on a pens√© la semaine qui vient 
de fa√ßon √† ce que les plus √† l'aise en Rails puissent suivre normalement
 la semaine et que les autres sachent mieux r√©partir leur effort :</p>

<ul>
  <li><b>Lundi et mardi</b> sont importants car les fonctionnalit√©s sont
 essentielles. Faites les bien : mardi est la seule journ√©e validante 
donc √† ne pas rater.</li>
  <li><b>Mercredi et jeudi</b> sont des journ√©es √©galement utiles 
(notamment l'Asset Pipeline). Mais si vous n'arrivez pas bien √† les 
ma√Ætriser, sachez que vous aurez l'occasion d'appliquer √† nouveau ces 
fonctionnalit√©s pendant vos projets finaux.</li>
  <li><b>Concernant vendredi</b>, c'est une journ√©e int√©ressante mais 
ceux qui doutent de leur niveau peuvent faire l'impasse et plut√¥t passer
 la journ√©e √† renforcer leurs bases en Rails.</li>
</ul>

<p>Ainsi, pour vendredi, n'h√©site pas √† consolider tes acquis si tu 
penses qu'aller plus loin te perdrait trop. Dans ce cas, je te propose, 
par exemple, de refaire un par un les projets de la semaine 5, du lundi 
au vendredi, afin de faire une nouvelle fois "The Gossip Project" de A √†
 Z en Rails. C'est un entra√Ænement √† Rails tr√®s complet !</p>


<h3>3. En conclusion</h3>
<p>Si tu as le niveau et que tu te sens √† l'aise, fais la semaine 
normalement. Chaque fonctionnalit√© servira pour les projets finaux.</p>
<p>Si tu doutes de ton niveau, ne panique pas si tu gal√®res mercredi et 
jeudi. Ensuite passe le vendredi √† renforcer tes bases en Rails. On a 
construit la semaine pour te permettre cette libert√©.</p>

<div class="card box-shadow-0 border-danger">
  <div class="card-content collapse show">
    <div class="card-body">
      <h4 class="card-title">‚ö†Ô∏è IMPORTANT</h4>
      <p>THP est une formation o√π on responsabilise chacun. Si tu 
d√©cides d'en profiter pour ne rien faire, libre √† toi... Chacun choisit 
ce qu'il fait de son temps et qui il veut devenir.</p>
    </div>
  </div>
</div>

<p>Bon courage pour cette derni√®re semaine de Rails üöÄ</p>

<p>Petit cadeau pour conclure üéÅ : n'h√©site pas √† utiliser la gem <a href="https://github.com/BetterErrors/better_errors" target="_blank">Better errors</a> dans tes futures app Rails. Elle facilite la compr√©hension des messages d'erreur et donc le d√©bug !</p>

</div>
</div>
</div>
</div>
</div>
</div>

<div class="row">
<div class="col-12">
<div class="card">
<div class="card-header" style="border-top: 3px solid #5E66E5">
<h1>
Ressource : 
L'Action Mailer
</h1>
<a class="heading-elements-toggle">
<i class="la la-ellipsis-v font-medium-3"></i>
</a>
<div class="heading-elements">
<ul class="list-inline mb-0">
<li>
<a href="https://www.thehackingproject.org/fr/dashboard/courses/1/lessons/69/lesson_submissions/new"><i class="ft-edit" data-original-title="Proposer une am√©lioration" data-placement="top" data-toggle="tooltip"></i>
</a></li>
<li>
<a data-action="collapse">
<i class="ft-minus"></i>
</a>
</li>
<li>
<a data-action="expand">
<i class="ft-maximize"></i>
</a>
</li>
</ul>
</div>
</div>
<div class="card-content collapse show">
<div class="card-body">
<div class="tab-pane active" id="home1" role="tabpanel">
<h2>1. Introduction</h2>
<p>Rails dispose d'un outil de gestion des envois d'e-mail plut√¥t bien 
con√ßu : Action Mailer. Gr√¢ce √† lui, tu vas pouvoir automatiser l'envoi 
de certains e-mails selon les crit√®res que tu d√©finiras (actions de tes 
utilisateurs, √©v√©nements ou alertes donn√©es, etc..). Nous allons donc 
t'apprendre √† param√©trer Action Mailer et √† l'utiliser de fa√ßon 
automatis√©e.</p>


<h2>2. Historique et contexte</h2>
<p>Les e-mails font, de nos jours, partie int√©grante de l'exp√©rience 
utilisateur d'un site web moderne. Sans eux, impossible de garder le 
contact avec tes utilisateurs, leur faire changer de mot de passe ou 
encore les pr√©venir d'un √©v√®nement important li√© √† leurs comptes 
(nouveau commentaire ? nouveau message ?). Maintenant que tu sais poser 
les bases d'une application Rails compl√®te (routes, models, views et 
controllers), on va lui ajouter les fonctionnalit√©s additionnelles qui 
en feront un service fonctionnel et professionnel.</p>

<h2>3. La ressource</h2>

<h3>3.1. Les concepts de base de l'Action Mailer</h3>
<p>L'Action Mailer est organis√© en plusieurs √©l√©ments au sein d'une app Rails : </p>
<ol>
  <li><b>Des mailers</b>, qui sont ni plus ni moins que des sortes de 
controllers appliqu√©s aux e-mails. Tout comme les controllers "normaux",
 ils contiennent des m√©thodes qui vont faire des appels √† la BDD (via 
les models) et ensuite envoyer des e-mails (au lieu d'envoyer des pages 
web √† des navigateurs). </li>
  <li><b>Des views</b>, qui sont des sortes de templates des e-mails √† 
envoyer. Tout comme les views de ton site, elles sont personnalis√©es 
gr√¢ce √† du code Ruby inclus dedans (pour rajouter un nom, un e-mail, le 
contenu d'un objet r√©cup√©r√© en BDD, etc.). Il existe deux types de views
 : les <code>.text.erb</code> et les <code>.html.erb</code> car on peut envoyer des e-mails au format HTML comme au format text.</li>
</ol>

<p>Au final, il faut consid√©rer qu'Action Mailer a un fonctionnement 
tr√®s proche du MVC classique de Rails sauf qu'au lieu d'afficher des 
pages HTML sur un navigateur, il envoie des fichiers HTML ou text par 
e-mail.</p>

<h3>3.2. Mettre en place ton premier Action Mailer</h3>
<p>Afin d'apprendre √† te servir de ce service, on te propose de pratiquer directement.</p>

<h4>3.2.1. Les bases pour bosser</h4>
<p> Commence par pr√©parer tout ce qu'il faut pour disposer d'une application de test : </p>
<ul>
  <li>G√©n√®re une application Rails <code>test_action_mailer</code> ;</li>
  <li>Cr√©e-lui un model <code>User</code> avec des champs <code>name</code> (string) et <code>email</code> (string) ;</li>
  <li>Cr√©e une BDD (si tu es en PostGre) et passe la migration.</li>
</ul>

<h4>3.2.2. Ton premier mailer</h4>
<p>√Ä pr√©sent, on va g√©n√©rer un mailer avec <code>$ rails g mailer UserMailer</code>. On l'a appel√© <code>UserMailer</code> dans l'id√©e qu'√† terme, il pourrait g√©rer tous les e-mails √† destination des utilisateurs. On pourrait aussi avoir un <code>AdminMailer</code> qui enverrait les e-mails aux gestionnaires du site.</p>
<p>Maintenant, jette un ≈ìil au mailer que tu viens de g√©n√©rer dans <code>app/mailers/user_mailer.rb</code> : il est vide mais h√©rite de <code>ApplicationMailer</code> que tu pourras retrouver √† <code>app/mailers/application_mailer.rb</code>. </p>

<p>On va √©diter le mailer pour rajouter une m√©thode dont le r√¥le sera 
simple : envoyer un e-mail de bienvenue √† tous les utilisateurs 
s'inscrivant sur notre site. Rajoute donc les lignes suivantes : </p>

<pre class=" language-ruby"><code class=" language-ruby"><span class="token keyword">class</span> <span class="token const">UserMailer</span> &lt; <span class="token const">ApplicationMailer</span>
  default from<span class="token punctuation">:</span> <span class="token string">'no-reply@monsite.fr'</span>
 
  <span class="token keyword">def</span> welcome_email<span class="token punctuation">(</span>user<span class="token punctuation">)</span>
    <span class="token comment">#on r√©cup√®re l'instance user pour ensuite pouvoir la passer √† la view en @user
</span>    <span class="token inst-var">@user</span> <span class="token operator">=</span> user 

    <span class="token comment">#on d√©finit une variable @url qu'on utilisera dans la view d‚Äôe-mail
</span>    <span class="token inst-var">@url</span>  <span class="token operator">=</span> <span class="token string">'http://monsite.fr/login'</span> 

    <span class="token comment"># c'est cet appel √† mail() qui permet d'envoyer l‚Äôe-mail en d√©finissant destinataire et sujet.
</span>    mail<span class="token punctuation">(</span>to<span class="token punctuation">:</span> <span class="token inst-var">@user</span><span class="token punctuation">.</span>email<span class="token punctuation">,</span> subject<span class="token punctuation">:</span> <span class="token string">'Bienvenue chez nous !'</span><span class="token punctuation">)</span> 
  <span class="token keyword">end</span>
<span class="token keyword">end</span></code></pre><br>

<p>La premi√®re ligne permet de d√©finir la valeur de <code>default[:from]</code>. Le hash <code>default</code>
 permet de d√©finir tout un ensemble de valeurs par d√©faut : celles-ci 
sont √©cras√©es si la m√©thode d'envoi d‚Äôe-mail d√©finit une valeur autre. 
Ici, l'objectif est que nos e-mails affichent toujours une adresse 
d‚Äôe-mail d'envoi : soit celle d√©finie par la m√©thode du mailer, soit, √† 
d√©faut, <code>no-reply@monsite.fr</code>.</p>

<h4>3.2.3. Ta premi√®re mailer view</h4>
<p>On va cr√©er le template de notre e-mail de bienvenue. <br>
Pour √ßa, cr√©e un fichier <code>welcome_email.html.erb</code> dans <code>app/views/user_mailer/</code>. Bien √©videmment le nom est extr√™mement important : il doit √™tre identique √† celui de la m√©thode <code>welcome_email</code> et plac√© dans le dossier <code>views/user_mailer/</code> qui contient tous les templates e-mails relatifs au mailer <code>UserMailer</code>. Le contenu du template sera le suivant :</p>

<pre class=" language-html"><code class=" language-html"><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>text/html; charset=UTF-8<span class="token punctuation">'</span></span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>Content-Type<span class="token punctuation">'</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Salut &lt;%= @user.name %&gt; et bienvenue chez nous !<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
      Tu t'es inscrit sur monsite.fr en utilisant l'e-mail suivant : &lt;%= @user.email %&gt;.
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
      Pour acc√©der √† ton espace client, connecte-toi via : &lt;%= @url %&gt;.
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span> √Ä tr√®s vite sur monsite.fr !
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span></code></pre>

<p>On va aussi pr√©voir une version texte pour les utilisateurs qui 
n'aiment pas les e-mails en HTML. C'est toujours mieux de pr√©voir les 
deux ! Pour cela, cr√©e √©galement un fichier <code>welcome_email.text.erb</code> dans <code>app/views/user_mailer/</code> et son contenu sera le suivant :</p>

<pre class=" language-text"><code class=" language-text">Salut &lt;%= @user.name %&gt; et bienvenue chez nous !
==========================================================
 
Tu t'es inscrit sur monsite.fr en utilisant l'e-mail suivant : &lt;%= @user.email %&gt;.
 
Pour acc√©der √† ton espace client, connecte-toi via : &lt;%= @url %&gt;.
 
√Ä tr√®s vite sur monsite.fr !</code></pre>

<h4>3.2.4. D√©finir l'envoi automatique</h4>
<p>Tout est pr√™t c√¥t√© Action Mailer : il ne reste plus qu'√† d√©finir √† 
quel moment notre app Rails doit effectuer l'envoi. Pour ceci, voici 
quelques exemples de cas :</p>

<ul>
  <li>Si tu veux envoyer un email √† la cr√©ation d'un utilisateur, c'est un callback <code>after_create</code> dans le model User</li>
  <li>Si tu veux envoyer un email quand un utilisateur vient de prendre un RDV sur Doctolib, c'est un callback <code>after_create</code> √† la cr√©ation d'un Appointment</li>
  <li>Si tu veux envoyer une newsletter hebdomadaire, c'est un Service 
qui tourne de mani√®re hebdomadaire (on verra comment faire des services 
cette semaine üòâ)</li>
  <li>Un email pour r√©initialiser le mot de passe peut se mettre dans le controller</li>
</ul>



<p>Dans notre cas, on veut envoyer un e-mail juste apr√®s la cr√©ation 
d'un utilisateur : il serait logique que ce travail revienne au model 
car 1) c'est lui qui cr√©e l'utilisateur donc autant qu'il fasse les 2 
actions et 2) Fat model Skinny controller, duuuuuude ! üï∫ </p>

<p>Du coup, va dans ton model <code>User</code> et rajoute la ligne suivante : </p>


<pre class=" language-ruby"><code class=" language-ruby"><span class="token keyword">class</span> <span class="token const">User</span> &lt; <span class="token const">ApplicationRecord</span>
  after_create <span class="token symbol">:welcome_send</span>

  <span class="token keyword">def</span> welcome_send
    <span class="token const">UserMailer</span><span class="token punctuation">.</span>welcome_email<span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">)</span><span class="token punctuation">.</span>deliver_now
  <span class="token keyword">end</span>

<span class="token keyword">end</span></code></pre><br>

<p>On a utilis√© un callback qui permet <b>juste apr√®s</b> l'inscription en base d'un nouvel utilisateur, d'appeler la m√©thode d'instance <code>welcome_send</code>. Celle-ci ne fait qu'appeler le mailer <code>UserMailer</code> en lui faisant ex√©cuter <code>welcome_email</code> avec, pour seule entr√©e, l'instance cr√©√©e (d'o√π le <code>self</code>).</p>

<p>√Ä noter qu'on rajoute ensuite un <code>deliver_now</code> pour envoyer imm√©diatement l‚Äôe-mail. Il est possible d'utiliser un <code>deliver_later</code>
 mais son fonctionnement en production est moins √©vident : il faut 
savoir g√©rer les t√¢ches asynchrones avec Active Job‚Ä¶ On ne va pas 
rentrer l√†-dedans pour le moment.</p>

<p>En r√©sum√©, nous venons de param√©trer la cha√Æne d'actions suivante : </p>
<ol>
  <li>Un utilisateur est cr√©√© en BDD par le model</li>
  <li>Gr√¢ce au callback <code>after_create</code>, on ex√©cute la m√©thode <code>welcome_send</code> sur l'instance qui vient d'√™tre sauv√©e en BDD</li>
  <li><code>welcome_send</code> dit, en r√©sum√©, "ex√©cute NOW la m√©thode <code>welcome_email</code> situ√©e dans le mailer <code>UserMailer</code>" </li>
  <li><code>welcome_email</code> va appeler 2 templates en leur mettant √† disposition une instance <code>@user</code> qui est l'utilisateur cr√©√© et une variable <code>@url</code> qui est juste un string. Cette m√©thode enverra ensuite les 2 templates √† <code>@user.email</code> avec comme sujet "Bienvenue chez nous".</li>
  <li>Les 2 templates (un HTML et un text) sont personnalis√©s avec les entr√©es en Ruby (<code>@user.name</code>, <code>@user.email</code> et <code>@url</code>) avant d'√™tre balanc√©s par e-mail </li>
  <li>Et voil√† ! üë©‚Äçüç≥ </li>
</ol>

<p>Pourtant, si tu fais le test en cr√©ant en console un utilisateur, √† 
part le template e-mail qui s'affiche dans le terminal, tu ne verras 
rien de tr√®s concret. En effet, Rails n'est pas en mesure d'envoyer 
comme √ßa des e-mails sans disposer d'un serveur SMTP configur√© ! C'est 
notre prochaine √©tape.</p>

<h3>3.3. Configurer les param√®tres d'Action Mailer</h3>
<p>Tu sais maintenant comment mettre en place un Action Mailer de base :
 il est temps de le param√©trer pour qu'il puisse envoyer des e-mails 
pour de vrai. Dans Rails, on peut d√©finir les param√®tres selon 
l'environnement dans lequel notre application tourne :</p>
<ul>
  <li>Si elle tourne <b>en environnement de d√©veloppement</b> (c'est le 
mode par d√©faut quand tu lances le serveur sur ton ordi), tu veux 
pouvoir tester l'affichage de l‚Äôe-mail mais √©viter de spammer les 
utilisateurs avec tes tests.</li>
  <li>Si elle tourne <b>en environnement de production</b> (c'est le 
mode par d√©faut sur Heroku. Tu peux aussi le lancer depuis ton ordi), l√†
 tu veux que les e-mails soient envoy√©s pour de vrai.</li>
</ul>

<h4>3.3.1. La config en d√©veloppement</h4>
<p>Ici le cahier des charges serait le suivant : on veut pouvoir </p>
<ul>
  <li>v√©rifier que notre app Rails d√©clenche bien des envois d‚Äôe-mails 
(=&gt; √ßa confirmerait que la cha√Æne enti√®re d‚ÄôAction Mailer est bien 
cod√©e et sans bug) ;</li>
  <li>v√©rifier la tronche des e-mails qu'on envoie ;</li>
  <li>ne surtout pas envoyer des e-mails par erreur, histoire de ne pas 
prendre le risque de spammer de vrais clients pendant nos tests.</li>
</ul> 

<p>Pour √ßa on va utiliser une gem assez cool qui s'appelle <a href="https://github.com/ryanb/letter_opener" target="_blank" class="text-primary">Letter Opener</a>.
 Son fonctionnement ? D√®s qu'un e-mail doit √™tre envoy√© par ton app 
Rails, celui-ci est automatiquement ouvert dans ton navigateur web. </p>
<p>Testons-la imm√©diatement sur ton app <code>test_action_mailer</code> : </p>
<ul>
  <li>Mets <code>letter_opener</code> dans le groupe de d√©veloppement de ton Gemfile puis bundle install</li>
  <li>Maintenant va dans <code>config/environments/development.rb</code> (fichier contenant les param√®tres de ton environnement de d√©veloppement) et colle les lignes <code>config.action_mailer.delivery_method = :letter_opener</code> et <code>config.action_mailer.perform_deliveries = true</code></li>
</ul>
<p><b>Note importante</b> : la ligne avec <code>perform_deliveries = true</code> permet d'√©teindre (en la passant √† <code>false</code>) tout envoi d'email de la part de ton app Rails. C'est bon de savoir qu'elle existe !</p>

<p>Maintenant que la gem est install√©e et configur√©e, va dans la console Rails et cr√©√© un utilisateur √† la vol√©e (par exemple : <code>User.create(name:"F√©f√©", email: "f√©f√©@yopmail.com")</code>).
 Tu devrais voir un visuel de l‚Äôe-mail que tu as r√©dig√© en HTML 
s'afficher dans ton navigateur ! Si ce n'est pas le cas, tu as rat√© une 
√©tape de mon pas √† pas‚Ä¶ </p>

<h4>3.3.2. La config en production</h4>
<h5>a) Choisir un service d'envoi</h5>
<p>Ici, le cahier des charges est simple : on veut pouvoir envoyer des vrais e-mails. C'est tout.</p>

<p>Pour le faire, tu as le choix entre plein de services diff√©rents : 
Mandrill by MailChimp, Postmark, Amazon SES, etc. Nous, on a une 
pr√©f√©rence pour <a href="https://www.mailjet.com/">MailJet</a> √† THP (ils sont efficaces, pas chers et fran√ßais üá´üá∑ üêì).</p>

<p>Toutefois, pour des raisons de fiabilit√© d‚Äôenvoi depuis des adresses 
gratuites ou fake, je vais te montrer comment passer par le leader du 
secteur : SendGrid. Commence par cr√©er un compte sur <a href="https://signup.sendgrid.com/" target="_blank">https://signup.sendgrid.com/</a> : indique un site web bidon, pr√©cise que tu es d√©veloppeur et dis que tu vas utiliser leur SMTP/API. Ensuite va sur <a href="https://app.sendgrid.com/guide/integrate/langs/smtp" target="_blank">https://app.sendgrid.com/guide/integrate/langs/smtp</a> et cr√©e une clef API.</p>

<h5>b) Sauver la clef d'API de fa√ßon s√©curis√©e</h5>
<p>Une fois cette clef en main, il faut la mettre en s√©curit√© dans ton 
app Rails. Pour √ßa, rien de mieux que la gem dotenv appliqu√©e √† Rails ! 
Voici les √©tapes :</p>

<ul>
  <li>Cr√©e un fichier <code>.env</code> √† la racine de ton application.</li>
  <li>Ouvre-le et √©cris dedans les informations suivantes : <code>SENDGRID_LOGIN='apikey'</code> et <code>
SENDGRID_PWD='ta_clef_API'</code> en rempla√ßant bien s√ªr ta_clef_API par la clef que tu viens de g√©n√©rer. Elle est au format <code>SG.sXPeH0BMT6qwwwQ23W_ag.wyhNkzoQhNuGIwMrtaizQGYAbKN6vea99wc8</code>. N'oublie pas les guillemets !</li>
  <li>Rajoute <code>gem 'dotenv-rails'</code> √† ton Gemfile et fait le <code>$ bundle install</code></li>
  <li>Et l'√©tape cruciale qu'on oublie trop souvent : ouvre le fichier <code>.gitignore</code> √† la racine de ton app Rails et √©cris <code>.env</code> dedans.</li>
</ul>

<h5>c) Param√©trer le SMTP avec les infos de SendGrid</h5>
<p>Parfait : tu as une clef API de SendGrid et tu es pr√™t √† l'utiliser. 
Il ne te reste qu'√† entrer les configurations SMTP de SendGrid dans ton 
app. Va dans <code>/config/environment.rb</code> et rajoute les lignes suivantes : </p>

<pre class=" language-ruby"><code class=" language-ruby"><span class="token const">ActionMailer</span><span class="token punctuation">:</span><span class="token symbol">:Base</span><span class="token punctuation">.</span>smtp_settings <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token symbol">:user_name</span> <span class="token operator">=</span>&gt; <span class="token const">ENV</span><span class="token punctuation">[</span><span class="token string">'SENDGRID_LOGIN'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token symbol">:password</span> <span class="token operator">=</span>&gt; <span class="token const">ENV</span><span class="token punctuation">[</span><span class="token string">'SENDGRID_PWD'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token symbol">:domain</span> <span class="token operator">=</span>&gt; <span class="token string">'monsite.fr'</span><span class="token punctuation">,</span>
  <span class="token symbol">:address</span> <span class="token operator">=</span>&gt; <span class="token string">'smtp.sendgrid.net'</span><span class="token punctuation">,</span>
  <span class="token symbol">:port</span> <span class="token operator">=</span>&gt; <span class="token number">587</span><span class="token punctuation">,</span>
  <span class="token symbol">:authentication</span> <span class="token operator">=</span>&gt; <span class="token symbol">:plain</span><span class="token punctuation">,</span>
  <span class="token symbol">:enable_starttls_auto</span> <span class="token operator">=</span>&gt; <span class="token keyword">true</span>
<span class="token punctuation">}</span></code></pre><br>

<h5>d) Passer les clefs d'API √† Heroku</h5>
<p>Maintenant que tes clefs d'API sont bien au chaud dans ton <code>.env</code>,
 il faut trouver un moyen pour qu'Heroku les ait. Sans elles, ton app 
Rails d√©ploy√©e chez eux n'a aucune chance de pouvoir acc√©der au service 
SendGrid !</p>
<p>Tout est <a href="https://devcenter.heroku.com/articles/config-vars" target="_blank">expliqu√© ici</a>. En r√©sum√©, tu vas devoir passer des commandes du genre <code>$ heroku config:set SENDGRID_PWD='SG.sXPeH0BMT6qwwwQ23W_ag.'</code> (on te laisse lire la doc).</p>

<div class="card box-shadow-0 border-info">
  <div class="card-content collapse show">
    <div class="card-body">
      <h4 class="card-title">üöÄ ALERTE BONNE ASTUCE</h4>
      <p class="card-text">Comment savoir si tu as bien param√©tr√© tes variables d'environnement (ex: ENV['SENDGRID_PWD']) via <code>dotenv</code> ? C'est simple : vas dans la console Heroku <code>$ heroku run rails console</code> et tapes tout simplement <code>ENV['SENDGRID_PWD']</code>.</p>
      <p>Si le r√©sultat est <code>nil</code>, c'est que tu as fait une erreur : la variable est mal d√©finie.</p>
      <p>Si le r√©sultat est <code>SG.sXPeH0BMT6qwwwQ23W_ag</code>, c'est parfait : la clef est bien d√©finie, elle est pr√™te √† √™tre utilis√©e !</p>
    </div>
  </div>
</div>


<h5>e) Tester l'envoi</h5>
<p>Tout est pr√™t √† pr√©sent ! Si ton site web est d√©ploy√© en production 
sur Heroku, Heroku a les clefs pour parler √† SendGrid : tu peux donc 
faire un test en cr√©ant un nouvel utilisateur. <br>
Mais dans un premier temps, tu peux faire plus simple en testant une 
fois l'envoi directement depuis l'environnement de d√©veloppement (ton 
ordi).</p>
<ul>
  <li>Enl√®ve la ligne <code>config.action_mailer.delivery_method = :letter_opener</code> du fichier <code>config/environments/development.rb</code> ;</li>
  <li>Va dans ta console Rails ;</li>
  <li>Cr√©√© un utilisateur avec une adresse en @yopmail.com ;</li>
  <li>Va v√©rifier que l‚Äôe-mail est bien arriv√© sur <a href="http://www.yopmail.com/" target="_blank">http://www.yopmail.com/</a>.</li>
</ul>

<div class="card box-shadow-0 border-danger">
  <div class="card-content collapse show">
    <div class="card-body">
      <h4 class="card-title">‚ö†Ô∏è ALERTE ERREUR COMMUNE</h4>
      <p class="card-text">Ces services d'envois en masse ont √©t√© con√ßus pour envoyer des e-mails <b>depuis des domaines propri√©taires</b>.
 Si tu ne poss√®des pas un nom de domaine (genre "thehackingprojet.org"),
 tu vas devoir utiliser un destinataire soit fake 
("no-reply@monsite.fr") soit gratuit (@yahoo ou @gmail). Dans les deux 
cas, tes e-mails vont √™tre vite consid√©r√©s comme du spam et tout 
simplement rejet√©s par la majorit√© des serveurs e-mails‚Ä¶</p>
      <p>Seule solution pour tester ton code : viser des adresses du 
genre @yopmail.com qui sont habitu√©es √† servir de poubelle et du coup, 
elles acceptent tout !</p>
    </div>
  </div>
</div>

<p>SendGrid propose une super interface pour visualiser le statut des 
e-mails que tu as envoy√© via ton appli et √† travers leur SMTP : <a href="https://app.sendgrid.com/email_activity" target="_blank">https://app.sendgrid.com/email_activity</a>.
 En cliquant sur "Search", tu peux lister e-mail par e-mail l'√©tat de 
leur envoi et de leur r√©ception. Parfait pour voir si ton app communique
 bien avec eux, m√™me si tes e-mails se font rejeter comme √©tant du spam 
(√ßa ne devrait pas arriver en √©crivant √† une adresse en @yopmail.com).</p>

<h5>f) Et si je veux envoyer des e-mails qui ne soient pas consid√©r√©s comme du spam ? </h5>
<p>Comme je te l'ai expliqu√©, la solution propre, c'est d'acheter un nom de domaine et de le param√©trer dans SendGrid‚Ä¶</p>

<p>Une autre solution, qui n'est pas applicable pour une "vraie" 
soci√©t√©, est de ne pas passer par SendGrid mais directement par la 
configuration SMTP de ton adresse mail perso. Par exemple, pour envoyer 
des e-mails via ton adresse Gmail, il te faut remplacer la configuration
 SMTP de Sendgrid par les lignes suivantes dans <code>/config/environment.rb</code> </p>

<pre class=" language-ruby"><code class=" language-ruby"><span class="token const">ActionMailer</span><span class="token punctuation">:</span><span class="token symbol">:Base</span><span class="token punctuation">.</span>smtp_settings <span class="token operator">=</span>   <span class="token punctuation">{</span>
    <span class="token symbol">:address</span>            <span class="token operator">=</span>&gt; <span class="token string">'smtp.gmail.com'</span><span class="token punctuation">,</span>
    <span class="token symbol">:port</span>               <span class="token operator">=</span>&gt; <span class="token number">587</span><span class="token punctuation">,</span>
    <span class="token symbol">:domain</span>             <span class="token operator">=</span>&gt; <span class="token string">'gmail.com'</span><span class="token punctuation">,</span> <span class="token comment">#you can also use google.com
</span>    <span class="token symbol">:authentication</span>     <span class="token operator">=</span>&gt; <span class="token symbol">:plain</span><span class="token punctuation">,</span>
    <span class="token symbol">:user_name</span>          <span class="token operator">=</span>&gt; <span class="token const">ENV</span><span class="token punctuation">[</span><span class="token string">'GMAIL_LOGIN'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token symbol">:password</span>           <span class="token operator">=</span>&gt; <span class="token const">ENV</span><span class="token punctuation">[</span><span class="token string">'GMAIL_PWD'</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span></code></pre>

<p>√âvidemment, il faut que tu rajoutes dans ton fichier <code>.env</code> ton login Gmail et ton mot de passe sous la forme <code>ENV['GMAIL_LOGIN'] = 'jose@gmail.com'</code> et <code>ENV['GMAIL_PWD'] = 'p1rouette_KKouette'</code>.</p>

<h2>4. Points importants √† retenir</h2>
<p>Action Mailer est un outil efficace et bien organis√© d'envoi des e-mails via une app Rails.</p>
<p>Il se base sur 2 √©l√©ments principaux : les <b>mailers</b> (sorte de controllers d'envoi d'e-mails) et les <b>mailer views</b> (sortes de template d'e-mails).</p>
<p>Une fois un mailer <code>UserMailer</code>g√©n√©r√©, on peut lui rajouter une m√©thode <code>welcome_email</code> qui d√©clenchera l'envoi de 2 templates : <code>app/views/user_mailer/welcome_email.html.erb</code> et <code>app/views/user_mailer/welcome_email.text.erb</code></p>
<p>Reste √† effectuer cet envoi depuis un model ou un controller (selon l'usage) gr√¢ce √†, par exemple, <code>UserMailer.welcome_email(user).deliver_now</code></p>
<p>En d√©veloppement, on utilisera la <code>gem "letter_opener"</code> pour visualiser dans son navigateur le rendu visuel des e-mails envoy√©s.</p>
<p>En production, il faudra param√©trer un serveur SMTP dans <code>/config/environment.rb</code>
 pour faire cet envoi. Id√©alement via un service pro (Mailjet / SendGrid
 / etc.), ou sinon via une adresse perso dans le cas d'un projet THP.</p>

<h2>5. Pour aller plus loin</h2>
<p>Voici quelques ressources pour savoir se servir de l'Action Mailer</p>
<ul>
  <li>Tu peux regarder <a href="https://grafikart.fr/tutoriels/actionmailer-852">la vid√©o</a> de Grafikart √† ce sujet. Comme d'hab, il va assez loin, mais c'est une bonne intro au sujet.</li>
  <li><a href="http://guides.rubyonrails.org/action_mailer_basics.html" target="_blank" class="text-primary">La doc</a> a pr√©vu une bonne explication de l'Action Mailer. D'ailleurs tu verras que mon pas √† pas s'inspire largement de la doc üòá.</li>
  <li>SitePoint ont fait un <a href="https://www.sitepoint.com/fun-sending-mail-rails/" target="_blank" class="text-primary">un bon tutoriel</a> qui va assez loin lui aussi.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>

<div class="row">
<div class="col-12">
<div class="card">
<div class="card-header" style="border-top: 3px solid #FF4081">
<h1>
Projets : 
Eventbrite : introduction et backend
</h1>
<a class="heading-elements-toggle">
<i class="la la-ellipsis-v font-medium-3"></i>
</a>
<div class="heading-elements">
<ul class="list-inline mb-0">
<li>
<a href="https://www.thehackingproject.org/fr/dashboard/courses/1/projects/100/project_submissions/new"><i class="ft-edit" data-original-title="Proposer une am√©lioration" data-placement="top" data-toggle="tooltip"></i>
</a></li>
<li>
<a data-action="collapse">
<i class="ft-minus"></i>
</a>
</li>
<li>
<a data-action="expand">
<i class="ft-maximize"></i>
</a>
</li>
</ul>
</div>
</div>
<div class="card-content collapse show">
<div class="card-body">
<div class="tab-pane active" id="home1" role="tabpanel">
<h2>1. Introduction</h2>
<p>Cette semaine tu vas faire un projet fil rouge qui t'accompagnera 
tout du long. √Ä la fin tu auras une application fonctionnelle en 
production, que tu pourras utiliser. L'application sera une sorte 
d'Eventbrite appliqu√© √† ta ville : les utilisateurs pourront cr√©er des 
√©v√©nements, fixer un prix, mettre en ligne une photo de profil, puis les
 visiteurs de l'application pourront rejoindre les √©v√©nements en payant 
le prix. Bien entendu, il y aura une gestion d'utilisateurs avec login /
 logout, et on a m√™me pr√©vu une interface administrateur pour valider 
les √©v√©nements de l'application.</p>

<h2>2. Le projet</h2>
<h3>2.1. Les Sp√©cifications du projet</h3>
<p>L'application sera une version minimaliste (mais fonctionnelle, c'est le plus important) d'<a href="https://www.eventbrite.fr/" target="_blank">Eventbrite</a>,
 un site qui propose plein d'√©v√©nements que tu peux rejoindre. Les 
√©v√©nements ne concernent qu'une seule ville, la ville o√π tu te trouves. 
Voici ce que tu peux faire :</p>

<ul>
  <li>En arrivant sur la page d'accueil, un visiteur a acc√®s aux 
√©v√©nements. Un header donne un lien d'acc√®s aux pages importantes : 
accueil, cr√©er un √©v√©nement, s'inscrire / se connecter, mon profil</li>
  <li>Il est possible de s'inscrire sur le site avec une adresse email</li>
  <li>Une personne inscrite sur le site peut proposer un √©v√©nement. Il 
renseignera le titre, une description, une date de d√©but, une dur√©e, un 
prix</li>
  <li>Sur la page qui affiche les √©v√©nements, tu verras les infos de 
l'√©v√©nement (description, date, dur√©e, prix, nombre de participants)</li>
  <li>Une personne connect√©e peut rejoindre un √©v√©nement. Elle va 
cliquer sur un lien pour acc√©der √† un formulaire d'inscription √† un 
√©v√©nement. Sur ce formulaire on donnera son pr√©nom, nom, et on mettra 
son num√©ro de carte bleue pour payer l'√©v√©nement</li>
  <li>Une personne qui a cr√©√© un √©v√©nement peut acc√©der √† une page qui 
affiche la liste des invit√©s. √Ä partir de cette page, ils peuvent 
acc√©der √† une page pour √©diter l'√©v√©nement, voir avoir le bouton pour le
 supprimer</li>
  <li>Chaque utilisateur aura une page profil, avec ses informations de base (pr√©nom, nom, description). Si un utilisateur est sur <b>sa</b>
 page profil, il a acc√®s √† deux liens : un pour √©diter ses informations 
primordiales (email, mot de passe) avec le bouton pour supprimer son 
compte, l'autre pour √©diter les informations de profil telles que le 
pr√©nom, le nom, ou la description</li>
  <li>Actions impossibles √† faire si la personne n'est pas connect√©e : 
rejoindre un √©v√©nement, cr√©er un √©v√©nement, acc√©der √† la page "mon 
profil"</li>
</ul>

<p>Nous verrons jeudi et vendredi comment ajouter une photo de profil 
aux √©v√©nements et aux utilisateurs, ainsi qu'une interface 
administrateur pour valider ou pas les √©v√©nements propos√©s par les 
utilisateurs. En gros c'est juste un scaffold dans un scaffold. Mais si 
tu sais bien les impl√©menter, tu auras un site fonctionnel et pr√™t √† 
l'utilisation. Tu seras pr√™t √† concurrencer <a href="https://www.onvasortir.com/" target="_blank">OnVaSortir</a> !</p>


<h3>2.2. Agenda de la semaine</h3>
<p>Voici ce que nous attendrons de toi cette semaine :</p>

<ul>
  <li><b>Lundi</b> : avant de faire les champions des views, tu vas 
cr√©er la base de donn√©es. Ensuite tu vas brancher un mailer pour avoir 
un syst√®me d'emails fonctionnel en production</li>
  <li><b>Mardi</b> : nous allons mettre en place un syst√®me de gestion 
d'utilisateurs avec Devise (sessions, logins, inscription, etc), puis tu
 vas faire les premi√®res views du site. En gros, tu feras en une journ√©e
 ce que tu as mis une semaine √† faire lors de The Gossip Project. Quel 
champion !</li>
  <li><b>Mercredi</b> : tu vas rendre l'inscription √† un √©v√©nement 
possible, de plus, nous allons te montrer comment brancher une API avec 
le syst√®me de paiement de Stripe.</li>
  <li><b>Jeudi</b> : tu vas mettre un peu de front en voyant l'Asset 
Pipeline, puis nous allons te montrer comment faire des uploads de photo
 avec Active Storage.</li>
  <li><b>Vendredi</b> : pour finir cette semaine en beaut√©, tu mettras 
en place une interface administrateur o√π les administrateurs du site 
pourront faire des choses d'administrateur. H√©h√©.</li>
</ul>



<h3>2.3. Aujourd'hui : une base de donn√©es bien faite</h3>
<p>Pour cette base de donn√©es, nous voyons trois models :</p>

<ul>
  <li>Un model <code>User</code>, qui repr√©sente les utilisateurs de notre site</li>
  <li>Un model <code>Event</code>, qui repr√©sente les √©v√©nements de notre site</li>
  <li>Un model <code>Attendance</code>, qui repr√©sente la participation √†
 un √©v√©nement. C'est la table de jointure entre les √©v√©nements et les 
participants √† un √©v√©nement (un peu comme les rendez-vous entre les 
docteurs et les patients)</li>
</ul>

<p>Pas besoin de plus. On va te pr√©senter chaque model : pour le moment, lis et ne code rien.</p>

<h4>2.3.1. Les utilisateurs</h4>
<p>Un utilisateur aura comme attributs :</p>

<ul>
  <li>Un <code>email</code>, qui est un <code>string</code> (g√©r√© par la gem d'authentification que l'on verra demain)</li>
  <li>Un <code>encrypted_password</code>, qui est un <code>string</code>(g√©r√© par la gem d'authentification que l'on verra demain)</li>
  <li>Une <code>description</code>, qui est un <code>text</code></li>
  <li>Un <code>first_name</code>, qui est un <code>string</code></li>
  <li>Un <code>last_name</code>, qui est un <code>string</code></li>
</ul>

<p>Un utilisateur peut participer √† plusieurs √©v√©nements au travers des 
participations. Un utilisateur peut administrer plusieurs √©v√©nements.</p>

<p>Demain nous allons voir Devise, une gem d'authentification tr√®s 
puissante. En th√©orie on ajoute les utilisateurs en base via Devise. 
Cependant, comme la journ√©e est d√©j√† bien charg√©e, nous pr√©f√©rons 
consacrer Devise √† la journ√©e de demain. Tout ce qui est <code>email</code> et <code>encrypted_password</code> sera donc g√©r√© demain. Nous allons donc te donner pour cet exercice la fa√ßon dont il faut ajout ces deux attributs :</p>

<pre class=" language-ruby"><code class=" language-ruby">t<span class="token punctuation">.</span>string <span class="token symbol">:email</span><span class="token punctuation">,</span>              null<span class="token punctuation">:</span> <span class="token keyword">false</span><span class="token punctuation">,</span> default<span class="token punctuation">:</span> <span class="token string">""</span>
t<span class="token punctuation">.</span>string <span class="token symbol">:encrypted_password</span><span class="token punctuation">,</span> null<span class="token punctuation">:</span> <span class="token keyword">false</span><span class="token punctuation">,</span> default<span class="token punctuation">:</span> <span class="token string">""</span></code></pre>

<p>Voil√†, mets-les dans le fichier de migration qui va cr√©er 
l'utilisateur, et le branchement de Devise se passera bien demain. Et 
ton cerveau n'explosera pas avec une journ√©e triple qui t'attend demain.</p>


<h4>2.3.2. Les √©v√©nements</h4>
<p>Les √©v√©nements ont plusieurs attributs :</p>

<ul>
  <li>Une <code>start_date</code>, qui est un <code>datetime</code>. <br>
    <u>Validations :</u> sa pr√©sence est obligatoire, et il est impossible de cr√©er ou modifier un √©v√©nement dans le pass√©.</li>
  <li>Une <code>duration</code>, qui est un <code>integer</code> repr√©sentant le nombre de minutes que cet √©v√©nement va durer. <br>
   <u>Validations :</u> Sa pr√©sence est obligatoire et le nombre de minutes doit √™tre un multiple de 5, et est strictement positif</li>
  <li>Un <code>title</code> qui est un <code>string</code>. <br>
    <u>Validations :</u>  Sa pr√©sence est obligatoire et doit faire au moins 5 caract√®res et maxi 140 caract√®res.</li>
  <li>Une <code>description</code> qui est un <code>text</code>. <br>
    <u>Validations :</u> Sa pr√©sence est obligatoire et la description doit faire entre 20 et 1000 caract√®res.</li>

  <li>Un <code>price</code> qui est un <code>integer</code>. Ce price correspond au nombre d'euros que co√ªte l'√©v√©nement. <br>
    <u>Validations :</u> Sa pr√©sence est obligatoire et cet integer doit
 √™tre compris entre 1 et 1000. (pas d'√©v√©nement gratuit pour cette 
premi√®re version de l'application)</li>
  <li>Une <code>location</code>, qui est un <code>string</code>. <br>
    <u>Validations :</u> Sa pr√©sence est obligatoire</li>
</ul>

<p>Un √©v√©nement a plusieurs participations, et plusieurs participants 
(utilisateurs) au travers des participations. Un √©v√©nement appartient √† 
un administrateur (utilisateur).</p>


<h4>2.3.3. Les participations</h4>
<p>Les participations ont un seul attribut :</p>

<ul>
  <li>Une <code>stripe_customer_id</code>, qui est un <code>string</code> et qui est l'identifiant unique donn√© par Stripe au payeur (pratique pour aller chercher ses informations).</li>
</ul>

<p>Une participation appartient √† un utilisateur, et un √©v√©nement.</p>


<h4>2.3.4. Construction de la base de donn√©es</h4>
<p>Maintenant que tu as toutes ces informations, cr√©√© une nouvelle app Rails et construis la base de donn√©es. Tu dois faire :</p>

<ul>
  <li>Les trois models, avec leurs attributs</li>
  <li>Les validations</li>
  <li>Un petit seed de quelques utilisateurs ayant des adresses @yopmail.com</li>
</ul>

<p>Pousse le tout sur Heroku. C'est toujours une bonne pratique de 
pousser tr√®s vite ton app avant qu'elle devienne ton complexe (et donc 
qu'elle g√©n√®re de nombreux bugs).</p>
<p>Pense √† la pousser souvent afin de rapidement d√©tecter tout bug de 
push : c'est plus simple de d√©bugger quand on a en t√™te les derniers 
changements effectu√©s entre le moment o√π √ßa marchait et le moment o√π √ßa 
ne marche plus.</p>

<h3>2.4. Le mailer</h3>
<p>Maintenant nous allons ajouter plusieurs mailers dans l'application. 
Ces e-mails doivent marcher en production (via Heroku, c'est √† dire 
qu'ils doivent bien envoyer l'e-mail comme convenu.</p>

<h5>2.4.1. Un e-mail √† la cr√©ation d'utilisateur</h5>
<p>Quand un utilisateur est cr√©√©, envoie-lui un e-mail de bienvenue (indice : utiliser <code>after_create</code>)</p>
<p>Mets tranquillement en place tout ton mailer comme expliqu√© dans la 
ressource puis fait le test en local sur ton ordinateur : apr√®s le seed 
ou si tu cr√©√©s un nouvel utilisateur depuis la console, il faut qu'un 
e-mail de bienvenue soit envoy√© !</p>

<p>Ensuite fait de m√™me via Heroku (tu peux lancer la console sur ton app Heroku avec <code>$ heroku run rails console</code>).</p>

<h5>2.4.2. Un e-mail quand quelqu'un participe √† l'√©v√©nement</h5>
<p>Quand un participant participe √† un √©v√©nement, envoie un e-mail au cr√©ateur de l'√©v√©nement (indice : <code>after_create</code> √† nouveau).</p>

<p>Concr√®tement cela veut dire que d√®s qu'une <code>Attendance</code> est cr√©√©e, l'utilisateur re√ßoit un e-mail. Fait le test en local en cr√©ant une participation via la console. Idem sur Heroku</p>

<h2>3. Rendu attendu</h2>
<p>Une application avec le backend fonctionnel et le mailer qui marche en production (= sur Heroku).</p>
</div>
</div>
</div>
</div>
</div>
</div>

</div>

      </div>
    </div>

    <div class="thp-flashes"></div>



    <script src="s7j1_fichiers/dashboard-6681459c92372465340c.js"></script>
    <script charset="utf-8">
      $('input[name=authenticity_token]').val($('meta[name=csrf-token]').attr('content'));
    </script>

  


<script type="text/javascript" id="hs-script-loader" src="s7j1_fichiers/9310539.js"></script><script type="text/javascript" id="">(function(e,c){if(!c.__SV){var l,h;window.mixpanel=c;c._i=[];c.init=function(q,r,f){function t(d,a){var g=a.split(".");2==g.length&&(d=d[g[0]],a=g[1]);d[a]=function(){d.push([a].concat(Array.prototype.slice.call(arguments,0)))}}var b=c;"undefined"!==typeof f?b=c[f]=[]:f="mixpanel";b.people=b.people||[];b.toString=function(d){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);d||(a+=" (stub)");return a};b.people.toString=function(){return b.toString(1)+".people (stub)"};l="disable time_event track track_pageview track_links track_forms track_with_groups add_group set_group remove_group register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking start_batch_senders people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user people.remove".split(" ");
for(h=0;h<l.length;h++)t(b,l[h]);var n="set set_once union unset remove delete".split(" ");b.get_group=function(){function d(p){a[p]=function(){call2_args=arguments;call2=[p].concat(Array.prototype.slice.call(call2_args,0));b.push([g,call2])}}for(var a={},g=["get_group"].concat(Array.prototype.slice.call(arguments,0)),m=0;m<n.length;m++)d(n[m]);return a};c._i.push([q,r,f])};c.__SV=1.2;var k=e.createElement("script");k.type="text/javascript";k.async=!0;k.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?
MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";e=e.getElementsByTagName("script")[0];e.parentNode.insertBefore(k,e)}})(document,window.mixpanel||[]);mixpanel.init("ab79c62023f2a925bfe5f7922c70de67");mixpanel.track("Sign up");</script>
<script type="text/javascript" id="">!function(){var a=window.analytics=window.analytics||[];if(!a.initialize)if(a.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{a.invoked=!0;a.methods="trackSubmit trackClick trackLink trackForm pageview identify reset group track ready alias debug page once off on addSourceMiddleware addIntegrationMiddleware setAnonymousId addDestinationMiddleware".split(" ");a.factory=function(b){return function(){var c=Array.prototype.slice.call(arguments);c.unshift(b);
a.push(c);return a}};for(var e=0;e<a.methods.length;e++){var f=a.methods[e];a[f]=a.factory(f)}a.load=function(b,c){var d=document.createElement("script");d.type="text/javascript";d.async=!0;d.src="https://cdn.segment.com/analytics.js/v1/"+b+"/analytics.min.js";b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(d,b);a._loadOptions=c};a._writeKey="HDfubo7D6T7lk8XiL2HZi2hZvIVFuK8j";a.SNIPPET_VERSION="4.13.2";a.load("HDfubo7D6T7lk8XiL2HZi2hZvIVFuK8j");a.page()}}();</script>
<iframe style="display: none; visibility: hidden;" owner="archetype" title="archetype"></iframe>
</body></html>