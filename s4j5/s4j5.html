<!DOCTYPE html>
<html class="loaded" lang="fr"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<script type="text/javascript" async="" src="s4j5_fichiers/insight.js"></script><script type="text/javascript" src="s4j5_fichiers/NRJS-71f55aa980e498e276b"></script><script src="s4j5_fichiers/nr-1212.js"></script><script type="text/javascript" async="" src="s4j5_fichiers/gtm_002.js"></script><script type="text/javascript" src="s4j5_fichiers/commons.js" async="" status="loaded"></script><script type="text/javascript" src="s4j5_fichiers/google-tag-manager.js" async="" status="loaded"></script><script type="text/javascript" async="" src="s4j5_fichiers/analytics.js"></script><script type="text/javascript" async="" src="s4j5_fichiers/mixpanel-2-latest.js"></script><script type="text/javascript" async="" src="s4j5_fichiers/conversion_async.js"></script><script src="s4j5_fichiers/conversations-embed.js" type="text/javascript" id="hubspot-messages-loader" data-loader="hs-scriptloader" data-hsjs-portal="9310539" data-hsjs-env="prod" data-hsjs-hublet="na1"></script><script src="s4j5_fichiers/9310539_003.js" type="text/javascript" id="hs-analytics"></script><script src="s4j5_fichiers/9310539_002.js" type="text/javascript" id="cookieBanner-9310539" data-cookieconsent="ignore" data-hs-ignore="true" data-loader="hs-scriptloader" data-hsjs-portal="9310539" data-hsjs-env="prod" data-hsjs-hublet="na1"></script><script src="s4j5_fichiers/fb.js" type="text/javascript" id="hs-ads-pixel-9310539" data-ads-portal-id="9310539" data-ads-env="prod" data-loader="hs-scriptloader" data-hsjs-portal="9310539" data-hsjs-env="prod" data-hsjs-hublet="na1"></script><script src="s4j5_fichiers/collectedforms.js" type="text/javascript" id="CollectedForms-9310539" crossorigin="anonymous" data-leadin-portal-id="9310539" data-leadin-env="prod" data-loader="hs-scriptloader" data-hsjs-portal="9310539" data-hsjs-env="prod" data-hsjs-hublet="na1"></script><script src="s4j5_fichiers/leadflows.js" type="text/javascript" id="LeadFlows-9310539" crossorigin="anonymous" data-leadin-portal-id="9310539" data-leadin-env="prod" data-loader="hs-scriptloader" data-hsjs-portal="9310539" data-hsjs-env="prod" data-hsjs-hublet="na1"></script><script async="" crossorigin="anonymous" src="s4j5_fichiers/fs.js"></script><script src="s4j5_fichiers/773401719499556.js" async=""></script><script async="" src="s4j5_fichiers/fbevents.js"></script><script async="" src="s4j5_fichiers/gtm.js"></script><script type="text/javascript" async="" src="s4j5_fichiers/analytics_002.js"></script><script>window.NREUM||(NREUM={});NREUM.info={"beacon":"bam.nr-data.net","errorBeacon":"bam.nr-data.net","licenseKey":"NRJS-71f55aa980e498e276b","applicationID":"576835834","transactionName":"dgpYEBRYDg9XQh8AA0YNVAsHRQZMVlFJF01GDVkT","queueTime":2,"applicationTime":4744,"agent":""}</script>
<script>(window.NREUM||(NREUM={})).init={ajax:{deny_list:["bam.nr-data.net"]}};(window.NREUM||(NREUM={})).loader_config={licenseKey:"NRJS-71f55aa980e498e276b",applicationID:"576835834"};window.NREUM||(NREUM={}),__nr_require=function(t,e,n){function r(n){if(!e[n]){var i=e[n]={exports:{}};t[n][0].call(i.exports,function(e){var i=t[n][1][e];return r(i||e)},i,i.exports)}return e[n].exports}if("function"==typeof __nr_require)return __nr_require;for(var i=0;i<n.length;i++)r(n[i]);return r}({1:[function(t,e,n){function r(){}function i(t,e,n,r){return function(){return s.recordSupportability("API/"+e+"/called"),o(t+e,[u.now()].concat(c(arguments)),n?null:this,r),n?void 0:this}}var o=t("handle"),a=t(10),c=t(11),f=t("ee").get("tracer"),u=t("loader"),s=t(4),d=NREUM;"undefined"==typeof window.newrelic&&(newrelic=d);var p=["setPageViewName","setCustomAttribute","setErrorHandler","finished","addToTrace","inlineHit","addRelease"],l="api-",v=l+"ixn-";a(p,function(t,e){d[e]=i(l,e,!0,"api")}),d.addPageAction=i(l,"addPageAction",!0),d.setCurrentRouteName=i(l,"routeName",!0),e.exports=newrelic,d.interaction=function(){return(new r).get()};var m=r.prototype={createTracer:function(t,e){var n={},r=this,i="function"==typeof e;return o(v+"tracer",[u.now(),t,n],r),function(){if(f.emit((i?"":"no-")+"fn-start",[u.now(),r,i],n),i)try{return e.apply(this,arguments)}catch(t){throw f.emit("fn-err",[arguments,this,t],n),t}finally{f.emit("fn-end",[u.now()],n)}}}};a("actionText,setName,setAttribute,save,ignore,onEnd,getContext,end,get".split(","),function(t,e){m[e]=i(v,e)}),newrelic.noticeError=function(t,e){"string"==typeof t&&(t=new Error(t)),s.recordSupportability("API/noticeError/called"),o("err",[t,u.now(),!1,e])}},{}],2:[function(t,e,n){function r(t){if(NREUM.init){for(var e=NREUM.init,n=t.split("."),r=0;r<n.length-1;r++)if(e=e[n[r]],"object"!=typeof e)return;return e=e[n[n.length-1]]}}e.exports={getConfiguration:r}},{}],3:[function(t,e,n){var r=!1;try{var i=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("testPassive",null,i),window.removeEventListener("testPassive",null,i)}catch(o){}e.exports=function(t){return r?{passive:!0,capture:!!t}:!!t}},{}],4:[function(t,e,n){function r(t,e){var n=[a,t,{name:t},e];return o("storeMetric",n,null,"api"),n}function i(t,e){var n=[c,t,{name:t},e];return o("storeEventMetrics",n,null,"api"),n}var o=t("handle"),a="sm",c="cm";e.exports={constants:{SUPPORTABILITY_METRIC:a,CUSTOM_METRIC:c},recordSupportability:r,recordCustom:i}},{}],5:[function(t,e,n){function r(){return c.exists&&performance.now?Math.round(performance.now()):(o=Math.max((new Date).getTime(),o))-a}function i(){return o}var o=(new Date).getTime(),a=o,c=t(12);e.exports=r,e.exports.offset=a,e.exports.getLastTimestamp=i},{}],6:[function(t,e,n){function r(t){return!(!t||!t.protocol||"file:"===t.protocol)}e.exports=r},{}],7:[function(t,e,n){function r(t,e){var n=t.getEntries();n.forEach(function(t){"first-paint"===t.name?p("timing",["fp",Math.floor(t.startTime)]):"first-contentful-paint"===t.name&&p("timing",["fcp",Math.floor(t.startTime)])})}function i(t,e){var n=t.getEntries();if(n.length>0){var r=n[n.length-1];if(f&&f<r.startTime)return;p("lcp",[r])}}function o(t){t.getEntries().forEach(function(t){t.hadRecentInput||p("cls",[t])})}function a(t){if(t instanceof g&&!y){var e=Math.round(t.timeStamp),n={type:t.type};e<=l.now()?n.fid=l.now()-e:e>l.offset&&e<=Date.now()?(e-=l.offset,n.fid=l.now()-e):e=l.now(),y=!0,p("timing",["fi",e,n])}}function c(t){"hidden"===t&&(f=l.now(),p("pageHide",[f]))}if(!("init"in NREUM&&"page_view_timing"in NREUM.init&&"enabled"in NREUM.init.page_view_timing&&NREUM.init.page_view_timing.enabled===!1)){var f,u,s,d,p=t("handle"),l=t("loader"),v=t(9),m=t(3),g=NREUM.o.EV;if("PerformanceObserver"in window&&"function"==typeof window.PerformanceObserver){u=new PerformanceObserver(r);try{u.observe({entryTypes:["paint"]})}catch(h){}s=new PerformanceObserver(i);try{s.observe({entryTypes:["largest-contentful-paint"]})}catch(h){}d=new PerformanceObserver(o);try{d.observe({type:"layout-shift",buffered:!0})}catch(h){}}if("addEventListener"in document){var y=!1,w=["click","keydown","mousedown","pointerdown","touchstart"];w.forEach(function(t){document.addEventListener(t,a,m(!1))})}v(c)}},{}],8:[function(t,e,n){function r(t,e){if(!i)return!1;if(t!==i)return!1;if(!e)return!0;if(!o)return!1;for(var n=o.split("."),r=e.split("."),a=0;a<r.length;a++)if(r[a]!==n[a])return!1;return!0}var i=null,o=null,a=/Version\/(\S+)\s+Safari/;if(navigator.userAgent){var c=navigator.userAgent,f=c.match(a);f&&c.indexOf("Chrome")===-1&&c.indexOf("Chromium")===-1&&(i="Safari",o=f[1])}e.exports={agent:i,version:o,match:r}},{}],9:[function(t,e,n){function r(t){function e(){t(c&&document[c]?document[c]:document[o]?"hidden":"visible")}"addEventListener"in document&&a&&document.addEventListener(a,e,i(!1))}var i=t(3);e.exports=r;var o,a,c;"undefined"!=typeof document.hidden?(o="hidden",a="visibilitychange",c="visibilityState"):"undefined"!=typeof document.msHidden?(o="msHidden",a="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(o="webkitHidden",a="webkitvisibilitychange",c="webkitVisibilityState")},{}],10:[function(t,e,n){function r(t,e){var n=[],r="",o=0;for(r in t)i.call(t,r)&&(n[o]=e(r,t[r]),o+=1);return n}var i=Object.prototype.hasOwnProperty;e.exports=r},{}],11:[function(t,e,n){function r(t,e,n){e||(e=0),"undefined"==typeof n&&(n=t?t.length:0);for(var r=-1,i=n-e||0,o=Array(i<0?0:i);++r<i;)o[r]=t[e+r];return o}e.exports=r},{}],12:[function(t,e,n){e.exports={exists:"undefined"!=typeof window.performance&&window.performance.timing&&"undefined"!=typeof window.performance.timing.navigationStart}},{}],ee:[function(t,e,n){function r(){}function i(t){function e(t){return t&&t instanceof r?t:t?u(t,f,a):a()}function n(n,r,i,o,a){if(a!==!1&&(a=!0),!l.aborted||o){t&&a&&t(n,r,i);for(var c=e(i),f=m(n),u=f.length,s=0;s<u;s++)f[s].apply(c,r);var p=d[w[n]];return p&&p.push([b,n,r,c]),c}}function o(t,e){y[t]=m(t).concat(e)}function v(t,e){var n=y[t];if(n)for(var r=0;r<n.length;r++)n[r]===e&&n.splice(r,1)}function m(t){return y[t]||[]}function g(t){return p[t]=p[t]||i(n)}function h(t,e){l.aborted||s(t,function(t,n){e=e||"feature",w[n]=e,e in d||(d[e]=[])})}var y={},w={},b={on:o,addEventListener:o,removeEventListener:v,emit:n,get:g,listeners:m,context:e,buffer:h,abort:c,aborted:!1};return b}function o(t){return u(t,f,a)}function a(){return new r}function c(){(d.api||d.feature)&&(l.aborted=!0,d=l.backlog={})}var f="nr@context",u=t("gos"),s=t(10),d={},p={},l=e.exports=i();e.exports.getOrSetContext=o,l.backlog=d},{}],gos:[function(t,e,n){function r(t,e,n){if(i.call(t,e))return t[e];var r=n();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!1}),r}catch(o){}return t[e]=r,r}var i=Object.prototype.hasOwnProperty;e.exports=r},{}],handle:[function(t,e,n){function r(t,e,n,r){i.buffer([t],r),i.emit(t,e,n)}var i=t("ee").get("handle");e.exports=r,r.ee=i},{}],id:[function(t,e,n){function r(t){var e=typeof t;return!t||"object"!==e&&"function"!==e?-1:t===window?0:a(t,o,function(){return i++})}var i=1,o="nr@id",a=t("gos");e.exports=r},{}],loader:[function(t,e,n){function r(){if(!T++){var t=P.info=NREUM.info,e=g.getElementsByTagName("script")[0];if(setTimeout(u.abort,3e4),!(t&&t.licenseKey&&t.applicationID&&e))return u.abort();f(O,function(e,n){t[e]||(t[e]=n)});var n=a();c("mark",["onload",n+P.offset],null,"api"),c("timing",["load",n]);var r=g.createElement("script");0===t.agent.indexOf("http://")||0===t.agent.indexOf("https://")?r.src=t.agent:r.src=v+"://"+t.agent,e.parentNode.insertBefore(r,e)}}function i(){"complete"===g.readyState&&o()}function o(){c("mark",["domContent",a()+P.offset],null,"api")}var a=t(5),c=t("handle"),f=t(10),u=t("ee"),s=t(8),d=t(6),p=t(2),l=t(3),v=p.getConfiguration("ssl")===!1?"http":"https",m=window,g=m.document,h="addEventListener",y="attachEvent",w=m.XMLHttpRequest,b=w&&w.prototype,E=!d(m.location);NREUM.o={ST:setTimeout,SI:m.setImmediate,CT:clearTimeout,XHR:w,REQ:m.Request,EV:m.Event,PR:m.Promise,MO:m.MutationObserver};var x=""+location,O={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-1212.min.js"},M=w&&b&&b[h]&&!/CriOS/.test(navigator.userAgent),P=e.exports={offset:a.getLastTimestamp(),now:a,origin:x,features:{},xhrWrappable:M,userAgent:s,disabled:E};if(!E){t(1),t(7),g[h]?(g[h]("DOMContentLoaded",o,l(!1)),m[h]("load",r,l(!1))):(g[y]("onreadystatechange",i),m[y]("onload",r)),c("mark",["firstbyte",a.getLastTimestamp()],null,"api");var T=0}},{}],"wrap-function":[function(t,e,n){function r(t,e){function n(e,n,r,f,u){function nrWrapper(){var o,a,s,p;try{a=this,o=d(arguments),s="function"==typeof r?r(o,a):r||{}}catch(l){i([l,"",[o,a,f],s],t)}c(n+"start",[o,a,f],s,u);try{return p=e.apply(a,o)}catch(v){throw c(n+"err",[o,a,v],s,u),v}finally{c(n+"end",[o,a,p],s,u)}}return a(e)?e:(n||(n=""),nrWrapper[p]=e,o(e,nrWrapper,t),nrWrapper)}function r(t,e,r,i,o){r||(r="");var c,f,u,s="-"===r.charAt(0);for(u=0;u<e.length;u++)f=e[u],c=t[f],a(c)||(t[f]=n(c,s?f+r:r,i,f,o))}function c(n,r,o,a){if(!v||e){var c=v;v=!0;try{t.emit(n,r,o,e,a)}catch(f){i([f,n,r,o],t)}v=c}}return t||(t=s),n.inPlace=r,n.flag=p,n}function i(t,e){e||(e=s);try{e.emit("internal-error",t)}catch(n){}}function o(t,e,n){if(Object.defineProperty&&Object.keys)try{var r=Object.keys(t);return r.forEach(function(n){Object.defineProperty(e,n,{get:function(){return t[n]},set:function(e){return t[n]=e,e}})}),e}catch(o){i([o],n)}for(var a in t)l.call(t,a)&&(e[a]=t[a]);return e}function a(t){return!(t&&t instanceof Function&&t.apply&&!t[p])}function c(t,e){var n=e(t);return n[p]=t,o(t,n,s),n}function f(t,e,n){var r=t[e];t[e]=c(r,n)}function u(){for(var t=arguments.length,e=new Array(t),n=0;n<t;++n)e[n]=arguments[n];return e}var s=t("ee"),d=t(11),p="nr@original",l=Object.prototype.hasOwnProperty,v=!1;e.exports=r,e.exports.wrapFunction=c,e.exports.wrapInPlace=f,e.exports.argsToArray=u},{}]},{},["loader"]);</script>
    <meta name="viewport" content="width=device-width, user-scalable=no">

    <meta name="csrf-param" content="authenticity_token">
<meta name="csrf-token" content="ODmb9ddgU3XX2y7BQHQ1cAkFJykcz7dJm0sTnH0bYgRLqbXReIAERB+KWBCAZYzsrVvUHzJuUg6C7FSoNE3GmA==">
    <title>Le tableau de bord | The Hacking Project</title>
<meta name="description" content="Nous cassons les codes de l'éducation, vous apprenez d'où vous voulez, en communauté.">
<meta name="robots" content="noindex, nofollow">
<meta property="og:title" content="Le tableau de bord">
<meta property="og:site_name" content="The Hacking Project">
<meta name="url" content="https://www.thehackingproject.org/fr/dashboard/courses/1/weeks/1/days/5">
<meta name="image" content="https://www.thehackingproject.org/packs/images/logo/20210910-THP-Logo_color_transparent-31229dd881904e010092de63be97cdfa.png">


    <link rel="apple-touch-icon" sizes="180x180" href="https://www.thehackingproject.org/assets/favicon/apple-touch-icon-c01aaccf467f7cc3d79bbce743d60779f5b833fdc4500cebd07a5e11a07a5c31.png">
<link rel="apple-touch-icon" sizes="120x120" href="https://www.thehackingproject.org/assets/favicon/apple-touch-icon-120x120-precomposed-372de868f08319961b72ba7e3b1ed7121e75e29c8294334cb2c911409ea18131.png">
<link rel="apple-touch-icon" sizes="120x120" href="https://www.thehackingproject.org/assets/favicon/apple-touch-icon-120x120-372de868f08319961b72ba7e3b1ed7121e75e29c8294334cb2c911409ea18131.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://www.thehackingproject.org/assets/favicon/favicon-32x32-804b12d1c41c60fe721477b7c3b0a32811dc610580dd40ac92f1cc04cbd05ca4.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://www.thehackingproject.org/assets/favicon/favicon-16x16-d96ba65e5785d32474df9ebc6fbfd5442c751d527b10981a474bc3b7a4079d01.png">
<link rel="manifest" href="https://www.thehackingproject.org/assets/favicon/manifest-cf975201fd8ac78a1f1a203357573d50031f1cc33436d099743df6428b8a38a2.json">
<link rel="mask-icon" href="https://www.thehackingproject.org/assets/favicon/safari-pinned-tab-8af1cfcf7525ccdccb490f9f5adad396653a4969b419e0a9a9d3a1088140a912.svg" color="#5bbad5">
<link rel="shortcut icon" href="https://www.thehackingproject.org/assets/favicon/favicon-cbf10361dc90b277565960736d4897fddef5468bff6299811ea9498459d56d21.ico">
<meta name="msapplication-config" content="/assets/favicon/browserconfig-dab38db6040ef54ac56e91fdd77e3d7b06746a634e87b68c99b59b216cb8611a.xml">
<meta name="theme-color" content="#ffffff">

    <link rel="stylesheet" media="screen" href="s4j5_fichiers/vendor-dab9e12f0ba58215899de05f149caa5f.css">
    <link rel="stylesheet" media="screen" href="s4j5_fichiers/dashboard-4ab6ba9737cbfc4c38b17a9a4de7833a.css">
    <link rel="stylesheet" media="screen" href="s4j5_fichiers/dashboard-ea5a94b9045ccb8d8ce8974b71b640603915dc183d5907c643.css">
    <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async="" src="s4j5_fichiers/js.js"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-105991867-1');
  </script>
<!-- End Google Analytics -->

<!-- Google Tag Manager -->
<script>
  (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer',"GTM-P8XRQ3M");
</script>
<!-- End Google Tag Manager -->

<!-- Facebook Pixel Code -->
    <script>
        !function(f,b,e,v,n,t,s)
        {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
        n.callMethod.apply(n,arguments):n.queue.push(arguments)};
        if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
        n.queue=[];t=b.createElement(e);t.async=!0;
        t.src=v;s=b.getElementsByTagName(e)[0];
        s.parentNode.insertBefore(t,s)}(window,document,'script',
        'https://connect.facebook.net/en_US/fbevents.js');
         fbq('init', '773401719499556');
        fbq('track', 'PageView');
    </script>
    <noscript>
     <img height="1" width="1"
    src="https://www.facebook.com/tr?id=773401719499556&ev=PageView
    &noscript=1"/>
    </noscript>
<!-- End Facebook Pixel Code -->

<script>
window['_fs_debug'] = false;
window['_fs_host'] = 'fullstory.com';
window['_fs_script'] = 'edge.fullstory.com/s/fs.js';
window['_fs_org'] = '14AEET';
window['_fs_namespace'] = 'FS';
(function(m,n,e,t,l,o,g,y){
    if (e in m) {if(m.console && m.console.log) { m.console.log('FullStory namespace conflict. Please set window["_fs_namespace"].');} return;}
    g=m[e]=function(a,b,s){g.q?g.q.push([a,b,s]):g._api(a,b,s);};g.q=[];
    o=n.createElement(t);o.async=1;o.crossOrigin='anonymous';o.src='https://'+_fs_script;
    y=n.getElementsByTagName(t)[0];y.parentNode.insertBefore(o,y);
    g.identify=function(i,v,s){g(l,{uid:i},s);if(v)g(l,v,s)};g.setUserVars=function(v,s){g(l,v,s)};g.event=function(i,v,s){g('event',{n:i,p:v},s)};
    g.anonymize=function(){g.identify(!!0)};
    g.shutdown=function(){g("rec",!1)};g.restart=function(){g("rec",!0)};
    g.log = function(a,b){g("log",[a,b])};
    g.consent=function(a){g("consent",!arguments.length||a)};
    g.identifyAccount=function(i,v){o='account';v=v||{};v.acctId=i;g(o,v)};
    g.clearUserCookie=function(){};
    g.setVars=function(n, p){g('setVars',[n,p]);};
    g._w={};y='XMLHttpRequest';g._w[y]=m[y];y='fetch';g._w[y]=m[y];
    if(m[y])m[y]=function(){return g._w[y].apply(this,arguments)};
    g._v="1.3.0";
})(window,document,window['_fs_namespace'],'script','user');
</script>
<!-- Start of HubSpot Embed Code -->
<script async="" defer="defer" id="hs-script-loader" src="s4j5_fichiers/9310539.js" type="text/javascript"></script>
<!-- End of HubSpot Embed Code -->


    <script src="s4j5_fichiers/thp-3cc5aa6fdf57842a7b6c714621cc7f2d3d31b51cb700b1de4e795d773.js"></script>
    <script src="s4j5_fichiers/manifest-1613feea780cfc5342f4.js"></script>
    <script src="s4j5_fichiers/vendor-ff3cb5540e737de52c97.js"></script>
    <script src="s4j5_fichiers/dashboard-25875e14460b4458b1bccffaa93d4a8cbee9691b06d54976fde.js"></script>

    <link href="s4j5_fichiers/css.css" rel="stylesheet">
  <script src="s4j5_fichiers/a"></script></head>

  <body class="vertical-layout 2-columns fixed-navbar menu-hide vertical-overlay-menu" data-open="click" data-menu="vertical-menu" data-color="bg-gradient-x-primary-blue" data-col="2-columns" data-thp-controller="days" data-thp-action="show" data-thp-layout="dashboard"><style type="text/css">html.hs-messages-widget-open.hs-messages-mobile,html.hs-messages-widget-open.hs-messages-mobile body{overflow:hidden!important;position:relative!important}html.hs-messages-widget-open.hs-messages-mobile body{height:100%!important;margin:0!important}#hubspot-messages-iframe-container{display:initial!important;z-index:2147483647;position:fixed!important;bottom:0!important}#hubspot-messages-iframe-container.widget-align-left{left:0!important}#hubspot-messages-iframe-container.widget-align-right{right:0!important}#hubspot-messages-iframe-container.internal{z-index:1016}#hubspot-messages-iframe-container.internal iframe{min-width:108px}#hubspot-messages-iframe-container .shadow-container{display:initial!important;z-index:-1;position:absolute;width:0;height:0;bottom:0;content:""}#hubspot-messages-iframe-container .shadow-container.internal{display:none!important}#hubspot-messages-iframe-container .shadow-container.active{width:400px;height:400px}#hubspot-messages-iframe-container iframe{display:initial!important;width:100%!important;height:100%!important;border:none!important;position:absolute!important;bottom:0!important;right:0!important;background:transparent!important}</style>
    <!-- Google Tag Manager (noscript) -->
<noscript>
<iframe height='0' src='https://www.googletagmanager.com/ns.html?id=GTM-P8XRQ3M' style='display:none;visibility:hidden' width='0'></iframe>
</noscript>
<!-- End Google Tag Manager (noscript) -->



    <nav class="header-navbar navbar-expand-md navbar navbar-with-menu navbar-without-dd-arrow fixed-top navbar-semi-light" style="padding:0;">
<div class="navbar-wrapper">
<div class="navbar-container content">
<div class="collapse navbar-collapse show" id="navbar-mobile">
<ul class="nav navbar-nav mr-auto float-left">
<li class="nav-item mobile-menu d-md-none mr-auto">
<a class="nav-link nav-menu-main menu-toggle hidden-xs" href="#">
<i class="ft-menu font-large-1"></i>
</a>
</li>
<li class="nav-item d-none d-md-block">
<a class="nav-link nav-menu-main menu-toggle hidden-xs" href="#">
<i class="ft-menu"></i>
</a>
</li>
</ul>
<ul class="nav navbar-nav float-right">
<li class="dropdown dropdown-user nav-item">
<a class="dropdown-toggle nav-link dropdown-user-link" data-toggle="dropdown" href="#">
<span class="avatar avatar-online">

<img alt="avatar" style="max-height: 40px!important; width: auto" class="rounded-circle img-border" src="s4j5_fichiers/default_profile-a3318a5e66467f9958f16a172f9d15d6.jpg">

</span>
</a>
<div class="dropdown-menu dropdown-menu-right">
<div class="arrow_box_right">
<a class="dropdown-toggle nav-link dropdown-user-link" href="https://www.thehackingproject.org/fr/dashboard/profile/user"><span class="avatar avatar-online pt-0">

<img alt="avatar" style="max-height: 40px!important; width: auto" class="rounded-circle img-border" src="s4j5_fichiers/default_profile-a3318a5e66467f9958f16a172f9d15d6.jpg">

</span>
<span class="user-name text-bold-700 ml-1 text-dark">
Lucie
</span>
</a><div class="dropdown-divider"></div>
<a class="dropdown-item" href="https://www.thehackingproject.org/fr/dashboard/profile/user/edit"><i class="ft-edit"></i>Éditer profil
</a><div class="dropdown-divider"></div>
<a class="dropdown-item" href="https://www.thehackingproject.org/fr/dashboard/profile/user/edit?edit=danger"><i class="ft-alert-triangle"></i>Zone à risques
</a><div class="dropdown-divider"></div>
<a class="dropdown-item" rel="nofollow" data-method="delete" href="https://www.thehackingproject.org/users/sign_out?locale=fr"><i class="ft-power"></i>
Déconnexion
</a></div>
</div>
</li>
</ul>
</div>
</div>
</div>
</nav>

      <div class="main-menu menu-fixed menu-light menu-accordion menu-shadow" data-scroll-to-active="true">
<div class="navbar-header">
<ul class="nav navbar-nav flex-row">
<li class="nav-item mr-auto">
<a class="navbar-brand" href="https://www.thehackingproject.org/?locale=fr"><h3 class="brand-text">The Hacking Project</h3>
</a></li>
<li class="nav-item d-md-none">
<a class="nav-link close-navbar">
<i class="ft-x"></i>
</a>
</li>
</ul>
</div>
<div class="main-menu-content">
<ul class="navigation navigation-main" data-menu="menu-navigation" id="main-menu-navigation">
<li class="nav-item">
<a href="https://www.thehackingproject.org/fr/dashboard"><i class="ft-calendar"></i>
<span class="menu-title" data-i18n="">
Aujourd'hui
</span>
</a></li>
<li class="nav-item">
<a href="https://www.thehackingproject.org/fr/dashboard/dashboard"><i class="ft-monitor"></i>
<span class="menu-title" data-i18n="">
Mon dashboard
</span>
</a></li>
<li class="nav-item has-sub">
<a href="#"><i class="fas fa-user-graduate"></i>
<span class="menu-title" data-i18n="">
Mon inscription
</span>
</a><ul class="menu-content">
<li>
<a href="https://www.thehackingproject.org/parcours?locale=fr">Choisir un parcours</a>
</li>
<li>
<a href="https://www.thehackingproject.org/fr/dashboard/profile/curriculum_subscriptions/new">Nouveau parcours</a>
</li>
<li>
<a href="https://www.thehackingproject.org/fr/dashboard/profile/curriculum_subscriptions/7209/edit">Changer parcours</a>
</li>
<li>
<a href="https://www.thehackingproject.org/fr/dashboard/modalites">Modalités</a>
</li>
</ul>
</li>
<li class="nav-item">
<a href="https://www.thehackingproject.org/fr/dashboard/certifications"><i class="fa ft-download"></i>
<span class="menu-title" data-i18n="">
Documents
</span>
</a></li>
<br>
<li>
<a href="https://www.thehackingproject.org/fr/dashboard/help"><i class="fa ft-help-circle"></i>
<span class="menu-title" data-i18n="">
Aide
</span>
</a></li>
</ul>
</div>
</div>



    <div class="app-content content">
      <div class="content-wrapper">
        <div class="content-wrapper-before"></div>
        <div class="content-header row"></div>
        <div class="container">
<div class="row">
<div class="col-12">
<ol class="breadcrumb">
<li class="breadcrumb-item">
<a href="https://www.thehackingproject.org/fr/dashboard/dashboard">Dashboard</a>
</li>
<li class="breadcrumb-item">
<a href="https://www.thehackingproject.org/fr/dashboard/courses/1">Fullstack web</a>
</li>
<li class="breadcrumb-item">
<a href="https://www.thehackingproject.org/fr/dashboard/courses/1/weeks/1">Programmation Orientée Objet</a>
</li>
<li class="breadcrumb-item active">
MVC - Ruby Version
</li>
</ol>
</div>
</div>
<!-- / PARTIAL FOR FREE MOUSSES -->
<!-- / PARTIAL FOR NEXT -->
<div class="row">
<div class="col-12">
<div class="card">
<div class="card-body">
<div class="row">
<div class="col-12 col-xl-12 text-center mb-3">
<h2 class="mb-2">
Programmation Orientée Objet
</h2>
<h3>
MVC - Ruby Version
</h3>
<h4>
<i class="fa fa-pencil text-success" data-placement="bottom" data-toggle="tooltip" title="" data-original-title="Corrections cette journée là"></i>

</h4>
<h5>
Tu vas voir le fameux framework MVC, adapté à une application Ruby.
</h5>
</div>
<div class="col-12 col-xl-12 timeline-left" id="activity">
<div class="timeline pt-2">
<ul class="list-unstyled base-timeline activity-timeline">
<li>
<a href="https://www.thehackingproject.org/fr/dashboard/courses/1/weeks/1/days/1"><div class="timeline-icon bg-dark">
<i class="ft-check font-medium-1"></i>
</div>
</a><div class="act-time">
<a href="https://www.thehackingproject.org/fr/dashboard/courses/1/weeks/1/days/1">Lundi
</a></div>
<div class="base-timeline-info">
<div class="text-dark">

Découverte de la POO
</div>
</div>
<small class="text-muted">
Nous allons te présenter le concept de POO et faire de superbes exercices dessus.
</small>
</li>
<li>
<a href="https://www.thehackingproject.org/fr/dashboard/courses/1/weeks/1/days/2"><div class="timeline-icon bg-dark">
<i class="ft-check font-medium-1"></i>
</div>
</a><div class="act-time">
<a href="https://www.thehackingproject.org/fr/dashboard/courses/1/weeks/1/days/2">Mardi
</a></div>
<div class="base-timeline-info">
<div class="text-dark">
<i class="fa fa-rocket text-danger" data-placement="bottom" data-toggle="tooltip" title="" data-original-title="Projet à rendre ce jour-là"></i>

Plus loin dans la POO
</div>
</div>
<small class="text-muted">
La POO est une notion centrale en Ruby : poussons-la plus loin pour que tu la maîtrises à fond !
</small>
</li>
<li>
<a href="https://www.thehackingproject.org/fr/dashboard/courses/1/weeks/1/days/3"><div class="timeline-icon bg-dark">
<i class="ft-check font-medium-1"></i>
</div>
</a><div class="act-time">
<a href="https://www.thehackingproject.org/fr/dashboard/courses/1/weeks/1/days/3">Mercredi
</a></div>
<div class="base-timeline-info">
<div class="text-dark">
<i class="fa fa-pencil text-success" data-placement="bottom" data-toggle="tooltip" title="" data-original-title="Corrections cette journée là"></i>

Jouer avec des excels
</div>
</div>
<small class="text-muted">
Tu vas voir comment utiliser Ruby pour manipuler des fichiers Excel. Très pratique quand on scrappe des données par exemple.
</small>
</li>
<li>
<a href="https://www.thehackingproject.org/fr/dashboard/courses/1/weeks/1/days/4"><div class="timeline-icon bg-dark">
<i class="ft-check font-medium-1"></i>
</div>
</a><div class="act-time">
<a href="https://www.thehackingproject.org/fr/dashboard/courses/1/weeks/1/days/4">Jeudi
</a></div>
<div class="base-timeline-info">
<div class="text-dark">
<i class="fa fa-rocket text-danger" data-placement="bottom" data-toggle="tooltip" title="" data-original-title="Projet à rendre ce jour-là"></i>

POO des champions, un morpion
</div>
</div>
<small class="text-muted">
Tu vas utiliser tes compétences de POO pour faire un programme en POO : un morpion. Ça fait envoyer du paté !
</small>
</li>
<li>
<div class="timeline-icon bg-primary">
<i class="ft-map-pin font-medium-1"></i>
</div>
<div class="act-time">
Vendredi
</div>
<div class="base-timeline-info">
<div class="text-dark">
<i class="fa fa-pencil text-success" data-placement="bottom" data-toggle="tooltip" title="" data-original-title="Corrections cette journée là"></i>

MVC - Ruby Version
</div>
</div>
<small class="text-muted">
Tu vas voir le fameux framework MVC, adapté à une application Ruby.
</small>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>

<!-- Les fameuses corrections qui n'arrivent que les jours concernés -->
<div class="row">
<div class="col-12">
<div class="card">
<div class="card-header" style="border-top: 3px solid #5E66E5">
<h1>
Ressource : 
MVC
</h1>
<a class="heading-elements-toggle">
<i class="la la-ellipsis-v font-medium-3"></i>
</a>
<div class="heading-elements">
<ul class="list-inline mb-0">
<li>
<a href="https://www.thehackingproject.org/fr/dashboard/courses/1/lessons/160/lesson_submissions/new"><i class="ft-edit" data-original-title="Proposer une amélioration" data-placement="top" data-toggle="tooltip"></i>
</a></li>
<li>
<a data-action="collapse">
<i class="ft-minus"></i>
</a>
</li>
<li>
<a data-action="expand">
<i class="ft-maximize"></i>
</a>
</li>
</ul>
</div>
</div>
<div class="card-content collapse show">
<div class="card-body">
<div class="tab-pane active" id="home1" role="tabpanel">

<h3>1. Introduction</h3>
<p>Dans cette ressource, tu vas voir ce qu'est que la fameuse 
architecture MVC. Nous t'expliquerons ce qu'elle veut dire, comment s'en
 servir, où elle est utilisée, et enfin pourquoi l'utiliser.</p>

<p>Si l'on devait résumer le MVC en une phrase, la voici&nbsp;: <br>
<b>le MVC, acronyme de Model-View-Controller, est un modèle 
d'architecture de logiciel orienté objet qui le décompose en 3 grosses 
composantes&nbsp;: une qui gère l'accès à la base de données (Model), 
une qui gère les interactions avec l'utilisateur (View), et une qui fait
 le rôle de chef d'orchestre de tout cela (Controller)</b>.</p>

<h3>2. Historique</h3>
<p>Avec la complexification constante des programmes dans les années 70,
 les informaticiens se sont dit que ranger le code dans des dossiers 
bien foutus, ça ne suffisait plus. Il fallait trouver une convention 
pour découper un gros programme en briques logiques (des 
sous-programmes) afin que ce soit plus lisible et moins le bordel. C'est
 là qu'intervint Trygve Reenskaug.</p>

<p>En 1978, lors d'une visite au très célèbre <a href="https://fr.wikipedia.org/wiki/Palo_Alto_Research_Center" class="text-primary" target="_blank">Palo Alto Research Center</a>
 (PARC), l'informaticien norvégien y présenta un modèle d'architecture 
logicielle adapté à leur concept naissant d'interface graphique (ça 
n'existait pas encore à l'époque). Ce premier jet de l'architecture MVC 
concernait un langage de programmation orienté objet qui s'appelle 
SmallTalk. Citons-le lors de la création du MVC : </p>

<blockquote class="blockquote pl-1 border-left-primary border-left-3">
  <p class="mb-0">MVC was conceived as a general solution to the problem
 of users controlling a large and complex data set. The hardest part was
 to hit upon good names for the different architectural components. 
Model-View-Editor was the first set. After long discussions, 
particularly with Adele Goldberg, we ended with the terms 
Model-View-Controller.</p>
  <footer class="blockquote-footer">Trygve Reenskaug</footer>
</blockquote>

<p>Le modèle du MVC connut un grand succès vers le milieu des années 90 
avec l'introduction de WebObjects. Java s'y est mis plus tard, ce qui a 
aidé à sa popularité. Enfin, le milieu des années 2000 a vu sa 
popularité croître auprès de cibles moins "corpo" puisque la création de
 Django en juillet 2005 (basé sur un modèle très proche, le MTV) et de 
Ruby on Rails en décembre 2005 ont permis au MVC de passer au rang de 
superstar dans l'architecture logicielle du web.</p>

<p>Aujourd'hui, le MVC est le framework d'architecture de sites le plus utilisé sur Internet.</p>

<h3>3. La ressource</h3>
<h4>3.1. Pourquoi se servir du MVC ?</h4>
<p>Imagine que tu fais une application complexe qui envoie des e-mails 
aux mairies. Nous pourrions écrire tout le code dans un fichier qui 
s'appelle <code>townhall_email.rb</code>. Le souci est que ce fichier se
 retrouverait avec beaucoup trop de lignes, et travailler à plusieurs 
dessus serait vite complexe. Maintenant imagine un projet encore plus 
grand, comme le site web de The Hacking Project. Il est hors de question
 d'avoir un fichier app.rb qui fait 200&nbsp;000 lignes&nbsp;: le 
maintenir serait l'enfer sur Terre. OK, mais comment le découper&nbsp;? 
Faire 1 classe pour 1 fonctionnalité, ne suffit généralement pas.</p>

<p>C'est pour cela que les architectures logicielles ont été 
créées&nbsp;: pour découper son programme en différents fichiers bien 
rangés selon un schéma précis. Ainsi, sans même avoir à lire le code de 
chaque fichier, on peut savoir globalement son rôle dans le programme. 
Il existe plusieurs façons d'architecturer une application, mais pour le
 web, le MVC est très populaire. <br>
À partir de maintenant, ne te laisse plus impressionner quand on te 
parle d'architecture logicielle&nbsp;: il s'agit juste de découper 
intelligemment un programme en plein de sous-programmes…</p>

<p>Une fois l'architecture choisie, le code de ton programme est alors 
rangé dans plein de fichiers rangés en catégories, chacun a son utilité,
 et il est alors facile (quand on connaît le framework) de savoir lequel
 modifier dans un cas donné.</p>

<h4>3.2. Model - View - Controller</h4>
<p>Voici un schéma qui représente le fonctionnement de l'archi MVC :</p>
<img src="s4j5_fichiers/411m4Ch.png" class="img-fluid">
<h5>Étape 1&nbsp;: Le Routeur</h5>

<p> L'utilisateur va aller sur l'application en saisissant une URL (= 
une adresse web). Le routeur, qui reçoit cette URL, s'occupe de router 
(Tiens&nbsp;! Comme son nom est bien choisi&nbsp;!) l'utilisateur vers 
le bon endroit, à l'image d'un aiguilleur qui dirigerait un train vers 
la bonne route. Par exemple, si l'utilisateur va sur la page 
facebook.com/mes_messages, le routeur va rediriger sa requête au 
controller qui s'occupe d'afficher tout ce qui est relatif aux messages.
 Si l'utilisateur était allé sur facebook.com/mon_profil, le routeur 
aurait redirigé la requête au controller qui s'occupe d'afficher ce qui 
est relatif aux profils.</p>
<p>Donc <b>le routeur redirige l'utilisateur vers le bon controller (qui n'est autre qu'une classe Ruby)</b>. <br>
  Mais plusieurs URLs peuvent pointer vers un même controller. Par 
exemple toutes les URLs suivantes vont pointer vers le controller en 
charge d'afficher ce qui est relatif aux messages : 
  </p><ul>
    <li>facebook.com/mes_messages =&gt; affichage des messages reçus</li>
    <li>facebook.com/nouveau_message =&gt; rédaction d'un message</li>
    <li>facebook.com/messages_envoyés =&gt; affichage des messages envoyés</li>
  </ul>  
  Du coup, le routeur va devoir être plus spécifique que de simplement 
pointer vers un controller. Au final, il va rediriger l'utilisateur vers
 une méthode <u>précise</u> du controller des messages.<p></p>

<h5>Étape 2&nbsp;: Le Controller</h5>
<p>En poursuivant sur l'exemple de la page 
facebook.com/mes_messages&nbsp;: l'utilisateur va s'attendre, en tapant 
cette URL, à voir s'afficher sur son navigateur tous les messages de sa 
boite de réception. <br>
  Il saisit l'URL, le routeur l'analyse et le renvoie vers une méthode précise du controller des messages&nbsp;: la méthode <code>show_messages</code>. Cette méthode aura 2 rôles qui résument bien la raison d'être d'un controller&nbsp;:
</p><ol>
  <li>Récupérer les informations de la base de données qu'il faut 
afficher (la liste des messages avec leur titre, l'expéditeur, la date 
de réception, etc.). <b>Pour cela, il va faire une demande au model, dont le rôle est d’interagir avec la base de données</b>.</li>
  <li>Une fois les informations récupérées du model, <b>le controller les envoie à la view correspondant à la méthode <code>show_messages</code></b>. Cette view va construire une jolie page HTML qui sera renvoyée à l'utilisateur.</li>
</ol><p></p>

<h5>Étape 3&nbsp;: Le Model</h5>
<p> Le model est une autre classe Ruby qui va avoir pour rôle 
d'interagir avec la base de données sur demande du controller. 
Généralement, il s'agit pour lui de récupérer des informations (qui 
doivent ensuite être affichées à l'utilisateur) sous la forme d'objets. 
Par exemple pour la page facebook.com/mes_messages, le controller va 
demander au model <code>Message</code> de lui retourner une liste des 
objets de la classe Message en ne sélectionnant que ceux qui doivent 
apparaître dans la boite de réception de l'utilisateur. <b>Le Modèle va piocher dans la base de données et renvoyer des objets de la classe <code>Message</code>, chacun étant lié à ses variables d'instance, par exemple un texte, un titre, un expéditeur, une date d'envoi, etc.</b></p>

<p>Un autre cas fréquent est qu'un controller demande au modèle de créer
 un message en base de données. C'est encore le model qui va s'occuper 
de cela, via une requête SQL qui n'aura même pas à être codée par vous 
(c'est là toute l'utilité du model).</p>

<p>Une fois l'opération effectuée par le model, le controller reprend la
 main. Dans notre exemple sur facebook.com/mes_messages, le model va 
renvoyer un array <code>@messages</code> qui contient tous les objets de classe <code>Message</code> qu'il faut afficher dans la boite de réception.</p>

<h5>Étape 4&nbsp;: La View</h5>
<p>Une fois que le controller a toutes les informations à afficher, il 
les rend disponibles à une dernière classe Ruby&nbsp;: la view. Celle-ci
 a pour rôle de <b>construire du HTML avec les informations envoyées par le controller</b>,
 HTML qui sera ensuite affiché sur le navigateur web de notre 
utilisateur. Dans notre exemple, si le controller nous envoie l'array <code>@messages</code>, la view pourra facilement parcourir cet array avec un petit <code>@messages.each do</code> et pour chaque objet de classe <code>Message</code> contenu dans l'array, elle va afficher une ligne dans la boite de réception de notre utilisateur.</p>

<p>Le controller peut rendre plusieurs objets disponibles à la view 
(tant qu'il en a fait la demande au bon model). Ainsi, on aurait pu 
avoir un objet <code>@current_user</code> de classe <code>User</code> qui correspond à l'utilisateur actuellement connecté. Avec cet objet, la view peut afficher facilement un <code>@current_user.name</code> qui retourne son nom et permet d'écrire un truc du genre <code>"Voici ta boite de réception Félix&nbsp;!"</code>.</p>

<p>Une fois la page HTML affichée, le tour est joué&nbsp;! Il ne reste 
plus qu'à attendre un clic de l'utilisateur sur un lien. En cliquant, il
 indique "je veux aller sur cette URL" =&gt; l'URL est envoyée au 
routeur =&gt; le routeur renvoie vers la bonne méthode du bon controller
 =&gt; etc. La boucle est bouclée, la routourne a tourné. </p>

<h5>En résumé</h5>

<p>Le routeur redirige, en fonction de ce que fait l'utilisateur (= 
quelle URL il choisit) vers la bonne méthode du bon controller (= le 
chef d'orchestre de tout cela). Puis le controller va demander à un 
model de récupérer en base de données les informations nécessaires. Ces 
informations sont ensuite renvoyées à une view pour qu'elle puisse 
construire la page HTML qu'on envoie à notre utilisateur. </p>


<div class="card box-shadow-0 border-success">
  <div class="card-content collapse show">
    <div class="card-body">
      <h4 class="card-title">🎨 EXEMPLE ILLUSTRÉ</h4>
      <p class="card-text">Pour bien visualiser le modèle MVC, on va te donner un exemple concret : celui d'un restaurant et de ses employés.
      </p><ul>
        <li>Le manager du restau (qui veut tout valider et tout savoir)&nbsp;: c'est le Controller&nbsp;;</li>
        <li>La cuistot serait le Model&nbsp;;</li>
        <li>Le serveur qui apporte les plats, serait la View&nbsp;;</li>
        <li>La serveuse qui présente le menu et prend les commande, serait le Routeur.</li>
      </ul>
      Tu entres dans le restaurant et t'assois à une table&nbsp;: la 
serveuse-Routeur vient alors te présenter le menu et prend ta commande. <br>Elle
 transmet l'info au manager-Controller (oui, ce manager veut TOUT 
savoir). Le Controller va alors demander au cuistot-Model de préparer le
 plat demandé. <br>
      Une fois fait, le Model donnera le plat au Controller, qui ordonnera au serveur-View de vous l'apporter. <br>
      Une fois le plat consommé, vous pouvez éventuellement vouloir 
continuer le repas&nbsp;: la serveuse reviendra avec le menu, etc.<p></p>
    </div>
  </div>
</div>

<h4>3.3 Quelques règles de base pour bien réussir vos Model - Controller - View</h4>
<p>On va te donner quelques règles à avoir en tête quand tu construiras 
un programme en MVC. Pour le moment cela ne te servira pas, mais c'est 
bien de s'en imprégner au début&nbsp;: </p>

<ul>
  <li>Le MVC a une philosophie de "fat models, skinny controllers". 
C’est-à-dire qu'il est préférable de faire des controllers avec le moins
 de code possible, quitte à tout mettre dans le model.</li>
  <li>Les controllers (qui sont des classes Ruby) seront remplis de 
méthodes. Il faut au maximum que ces méthodes correspondent à celles 
d'un "CRUD" (Create, Read, Update, Destroy) et éviter d'en rajouter 
d'autres, quitte à créer plus de controllers. </li>
  <li>Il faut que ton code soit DRY (Don't Repeat Yourself)&nbsp;: 
n'écrit jamais plus de deux fois la même chose… Au bout de la 3ème fois,
 c'est que le bout de code que tu répètes peut être mis dans un endroit 
(une méthode par exemple) auquel tu fais appel en une seule ligne. </li>
  <li> Le DRY est primordial pour les views. La majorité du temps, les 
views utilisent du code qui est répété à plusieurs endroits. Par exemple
 le header ou le footer, que l'on retrouve partout, peuvent être mis 
dans un fichier "header" et être appelé en une ligne par chaque view.</li>
  <li>Comme les models jouent avec la base de données, et qu'une base de
 données propre est crucial pour toute application web, la construction 
des models peut prendre beaucoup de temps comparé au reste. Bâcler ses 
models, c'est aller au-devant de gros problèmes à moyen terme.</li>
</ul>

<p>Nous reviendrons plus tard sur ces règles de base.</p>

<h3>4. Points importants à retenir</h3>
<p>Le MVC a été créé afin de pouvoir gérer des interfaces graphiques et 
des bases de données. C'est un modèle d'architecture logicielle utilisé 
par la majorité des sites internet. Il ne peut être appliqué qu'aux 
langages orientés objets.</p>

<p>MVC veut dire Model View Controller&nbsp;: il décomposera ton app en trois grosses composantes.</p>
<ul>
  <li>une qui gère la base de données (Model) – en y ajoutant, supprimant ou récupérant les bonnes informations.</li>
  <li>une qui gère les interactions avec l'utilisateur (View) – en construisant les pages HTML.</li>
  <li>une qui fait le rôle de chef d'orchestre de tout cela (Controller) – en faisant le lien entre chaque composant.</li>
</ul>

<p>Le routeur redirige, en fonction de ce que fait l'utilisateur (= 
quelle URL il choisit) vers la bonne méthode du bon controller (= le 
chef d'orchestre de tout cela). Puis le controller va demander à un 
model (= classe Ruby faisant des requêtes) de récupérer en base de 
données les informations nécessaires. Ces informations sont ensuite 
renvoyées à une view pour qu'elle puisse construire la page HTML.</p>

<h3>5. Pour aller plus loin</h3>
<p>Le projet du jour va concerner une application Ruby en MVC, mais si tu t'ennuies, tu peux aller jeter un oeil à <a href="https://github.com/mindplace/accountability-list" class="text-primary" target="_blank">ce repo GitHub</a>, où Esther a créé une application de To-Do List en Ruby, utilisant le modèle du MVC.</p>

</div>
</div>
</div>
</div>
</div>
</div>

<div class="row">
<div class="col-12">
<div class="card">
<div class="card-header" style="border-top: 3px solid #FF4081">
<h1>
Projets : 
The Gossip Project - The MVC version
</h1>
<a class="heading-elements-toggle">
<i class="la la-ellipsis-v font-medium-3"></i>
</a>
<div class="heading-elements">
<ul class="list-inline mb-0">
<li>
<a href="https://www.thehackingproject.org/fr/dashboard/courses/1/projects/87/project_submissions/new"><i class="ft-edit" data-original-title="Proposer une amélioration" data-placement="top" data-toggle="tooltip"></i>
</a></li>
<li>
<a data-action="collapse">
<i class="ft-minus"></i>
</a>
</li>
<li>
<a data-action="expand">
<i class="ft-maximize"></i>
</a>
</li>
</ul>
</div>
</div>
<div class="card-content collapse show">
<div class="card-body">
<div class="tab-pane active" id="home1" role="tabpanel">
<h2>1. Introduction</h2>
<p>La théorie, c'est bien. La pratique, c'est mieux. Nous allons donc te
 proposer de mieux appréhender l'architecture du MVC en faisant une 
application Ruby. Cette application utilisera bien entendu le modèle du 
MVC, afin d'avoir du code propre, bien rangé, et bien ordonné. Le projet
 sera assez pas à pas car il n'est jamais aisé de produire son premier 
MVC.</p>

<p>Voici l'application : The Hacking Project est une superbe formation, 
avec une communauté soudée. Qui dit communauté soudée, dit potins à 
tout-va. Nous allons donc créer une application qui s'appelle The Gossip
 Project, où l'utilisateur pourra rentrer les ragots et rumeur, afficher
 une liste des potins, puis supprimer ceux qui ne sont plus d'actualité.</p>

<p>Les vues seront affichées dans le terminal, les potins enregistrés en
 CSV, et le programme tournera jusqu'à ce que l'utilisateur le quitte.</p>

<p>Pour cet exercice, j'ai fait le choix de CSV, mais tu peux remplacer 
CSV par JSON si tu es plus à l'aise. Il faudra juste garder la même 
arborescence et la même logique. Maintenant que c’est dit, nous pouvons 
commencer.</p>

<h2>2. Le projet</h2>

<h3>2.1. Décomposer le programme</h3>
<p>Avant de partir dans du code sans réfléchir, nous allons penser et 
conceptualiser le programme. Il y aura 4 grandes parties, chacune 
correspondant à une classe (donc un fichier) :</p>
<ul>
  <li>Le routeur</li>
  <li>Le controller</li>
  <li>La view</li>
  <li>La base de donnée (model)</li>
</ul>

<p>Pour le moment, ne code rien. On va juste passer en revue chaque fichier pour bien te rappeler ce qu'ils vont chacun faire.</p>

<h4>Le routeur</h4>
<p>Le travail du routeur sera simple : c'est de demander ce que 
l'utilisateur veut faire et de lancer la bonne méthode dans la bonne 
classe, en fonction. <br>
Il y aura 3 choix : créer un gossip, voir la liste complète des gossips 
ou supprimer un gossip. Chaque action correspond à une méthode du 
controller.</p>

<h4>Le controller</h4>
<p>Le controller servira de relai entre la view et le model. Il aura 3 
méthodes : une qui gère la création d'un potin, une qui gère l'affichage
 de la liste des potins, et une qui permet de détruire un potin. Une 
fois l'action effectuée (via le model), la méthode devra renvoyer vers 
la view.</p>

<h4>La view</h4>
<p>La view s'occupera d'afficher les bonnes informations à 
l'utilisateur. Comme on n'a pas encore vu les systèmes de fichiers HTML 
(on voit ça très bientôt 😉), on va coder ça sur le terminal avec des 
bons vieux <code>puts</code> en l'affichage et <code>gets.chomp</code> pour obtenir les ordres de l'utilisateur.</p>

<h4>Le model et la base de données</h4>
<p>Un potin sans son contenu, eh bien c'est comme un hamburger sans 
pain. Vazy cé nul. Nous allons donc faire en sorte qu'un potin ait 2 
attributs :</p>
<ul>
  <li>son <code>content</code> qui est un string</li>
  <li>un <code>author</code> qui est aussi un string</li>
</ul>

<p>C'est tout. On aurait pu ajouter d'autres choses (la date du potin par exemple), mais pour ce premier MVC on va faire simple.</p>

<p>Au final, le model sera une classe <code>Gossip</code> qui ira piocher dans la base de données (le CSV) et sortira des instances de type <code>Gossip</code>. Elles auront, tu l'as compris, 2 variables d'instance : un <code>content</code> et un <code>author</code>.</p>

<h4>Architecture du programme</h4>
<p>Ok, en sachant tout ceci, notre arborescence du programme va ressembler, à la fin, à ça :</p>
<pre class=" language-shell"><code class=" language-shell">.
├── lib
│    ├── controller.rb
│    ├── gossip.rb
│    ├── router.rb
│    └── view.rb
├── db
│   └── gossip.csv
├── app.rb
├── Gemfile
└── Gemfile.lock</code></pre>

<p>Jusqu'ici, rien de bien nouveau. Mais ça fait du bien de se rafraîchir la mémoire ! <br>
Et maintenant, pour coder tout ça, commençons par le commencement, la première fonctionnalité : l'ajout de potins.</p>

<h3>2.2. Ajouter un potin</h3>
<p>Poser les bases d'un programme, sa structure, c'est toujours le gros 
morceau. Pour t'éviter le syndrome de la page blanche, nous allons te 
guider dans ta quête du potin parfait.</p>

<h4>2.2.1. Mettre en place son environnement de travail</h4>
<p>Avant toute chose, tu vas créer un dossier <code>the_hacking_gossip_ruby_version_POO</code>
 puis te placer dedans. Tu vas ensuite créer le Gemfile, mettre la bonne
 version de Ruby, la gem CSV, puis tes gems préférées (PRY pourra 
t'aider par exemple), et faire l'installation via Bundler.</p>

<p>Puis nous allons faire le fichier <code>app.rb</code>, porte d'entrée
 de notre application. Étant donné que tout passe par le router, il faut
 juste que son code fasse appelle à la classe <code>Router</code> via un <code>Router.new.perform</code> et puis c'est tout 👈</p>

<p>Par contre, une fois écrit, si tu lances ton programme, ce dernier 
devrait t'envoyer bouler puisque tu n'as pas encore créé ta classe <code>Router</code>. C'est la prochaine étape.</p>

<p>Ton arborescence doit, pour le moment, ressembler à ceci : </p>

<pre class=" language-shell"><code class=" language-shell">.
├── app.rb
├── Gemfile
└── Gemfile.lock</code></pre>
    

<h4>2.2.2. Le router</h4>
<p>Le boulot du router est proche de celui d'un serveur : il propose les
 possibilités à notre utilisateur, et en fonction de ce que celui-ci 
rentre, il redirige vers la bonne méthode du controller. ✌</p>

<p>Crée un dossier <code>\lib</code> dans lequel tu vas ajouter un fichier <code>router.rb</code> qui doit héberger une classe <code>Router</code>. Maintenant on va te détailler ce que tu dois mettre dans cette classe.</p>

<p>Dès le début, le router va créer une instance de la classe <code>Controller</code> qu'on appellera <code>@controller</code>.
 C'est un peu déroutant mais c'est via cette instance qu'il va 
déclencher la méthode adéquate : celle qui permet d'ajouter un potin, de
 le supprimer ou de les lister tous.</p>

<div class="card box-shadow-0 border-info">
  <div class="card-content collapse show">
    <div class="card-body">
      <h4 class="card-title">🤓 QUESTION RÉCURRENTE</h4>
      <p class="card-text"><b>Une instance <code>@controller</code>&nbsp;? Mais pourquoi ?</b></p>
      <p>Dans ce cas précis, l'instance <code>@controller</code> ne te 
parle pas trop en termes d'objet, car on ne peut pas la rattacher à un 
objet concret de la vie (comme un gossip, un user ou une voiture).</p>

      <p> Dis-toi juste que <b>c'est une manière pour le routeur d'exécuter une méthode située dans une autre classe</b> : en faisant <code>@controller.create_gossip</code>, le routeur passe la main à la classe <code>Controller</code> en exécutant sa méthode <code>create_gossip</code>.</p>
    </div>
  </div>
</div>

<p> Première étape donc : appeler la classe Controller avec <code>require</code>, et l'instancier (= créer une instance) dans l'initialize de la classe <code>Router</code>.
 C'est beaucoup de termes techniques, mais cela permet de bien te 
familiariser avec le vocabulaire de la POO. D'une pierre deux coups ⚡</p>

<p>Ensuite, on va créer une méthode <code>perform</code>, qui va contenir une boucle infinie (boucle <code>while true</code>)qui va demander ce que l'utilisateur veut faire en lui proposant 2 choix (utilise ici un <code>case - when</code>, va voir sur Google comment ça marche si besoin). Les 2 choix seront 1) créer un gossip et 4) quitter l'app</p>


<p></p>Essaye, en utilisant l'énoncé ci-dessus, de poser les bases de la classe <code>Router</code>.
 Ensuite, compare ce que tu as fait avec cette petite correction 
ci-dessous (on a conscience que c'est pas simple. On va pas te larguer 
direct !). Bien évidemment, regarde bien le code que je te propose et 
les commentaires que j'ai rajouté rien que pour tes yeux 👀<p></p>

<pre class=" language-ruby"><code class=" language-ruby">require <span class="token string">'controller'</span>

<span class="token keyword">class</span> <span class="token const">Router</span>

<span class="token comment">#On veut qu'un "Router.new" lancé par app.rb, crée automatique une instance "@controller"
</span>  <span class="token keyword">def</span> initialize
    <span class="token inst-var">@controller</span> <span class="token operator">=</span>  <span class="token const">Controller</span><span class="token punctuation">.</span><span class="token keyword">new</span>
  <span class="token keyword">end</span> 

<span class="token comment">#rappelle-toi que l'on fait "Router.new.perform" dans app.rb =&gt; après initialize, on définit donc perform.
</span>  <span class="token keyword">def</span> perform 
    puts <span class="token string">"BIENVENUE DANS THE GOSSIP PROJECT"</span>

    <span class="token keyword">while</span> <span class="token keyword">true</span>

      <span class="token comment">#on affiche le menu
</span>      puts <span class="token string">"Tu veux faire quoi jeune mouss' ?"</span>
      puts <span class="token string">"1. Je veux créer un gossip"</span>
      puts <span class="token string">"4. Je veux quitter l'app"</span>
      params <span class="token operator">=</span> gets<span class="token punctuation">.</span>chomp<span class="token punctuation">.</span>to_i <span class="token comment">#on attend le choix de l'utilisateur
</span>
      <span class="token keyword">case</span> params <span class="token comment">#en fonction du choix
</span>      <span class="token keyword">when</span> <span class="token number">1</span>
        puts <span class="token string">"Tu as choisi de créer un gossip"</span> 
        <span class="token inst-var">@controller</span><span class="token punctuation">.</span>create_gossip

      <span class="token keyword">when</span> <span class="token number">4</span>
        puts <span class="token string">"À bientôt !"</span>
        <span class="token keyword">break</span> <span class="token comment">#Ce "break" permet de sortir de la boucle while. C'est même la seule façon d'en sortir.
</span>
      <span class="token keyword">else</span>
        puts <span class="token string">"Ce choix n'existe pas, merci de ressayer"</span> <span class="token comment">#Si l'utilisateur saisit une entrée non prévue, il retourne au début du "while true". 
</span>        <span class="token comment">#C'est pour ça que la boucle est infinie: potentiellement, il peut se gourer jusqu'à la fin des temps :)
</span>
      <span class="token keyword">end</span>
    <span class="token keyword">end</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span></code></pre>

<p>Un menu qui demande ce que l’utilisateur veut faire, un bon vieux <code>case - when</code>,
 et les bon appels de méthodes. C'est aussi simple que cela. Maintenant 
si tu lances le programme, ce dernier va râler, car le controller 
n'existe pas. C'est bon signe puisque cela veut dire qu'il arrive à lire
 le router, donc ne nous arrêtons pas en si bon chemin. On va créer le 
controller, et commencer à avoir un début de programme. En avant !</p>

<p>À ce moment-là, ton architecture de code devrait ressembler à ceci :</p>
<pre class=" language-shell"><code class=" language-shell">.
├── app.rb
├── Gemfile
├── Gemfile.lock
└── lib
    └── router.rb</code></pre>

<h4>2.2.3. Le controller</h4>
<p>Ce fameux chef d'orchestre : le controller est avant tout une suite 
de méthodes qui sont appelées par le routeur. Chaque méthode va contenir
 des appels au model <code>Gossip</code> et se finira avec un retour vers une view qui affiche quelquechose.</p>

<p>On en profite pour te faire remarquer une chose : on a le fichier <code>gossip.rb</code> qui va héberger la classe <code>Gossip</code> et non pas un <code>model.rb</code> avec une classe <code>Model</code>. En effet, contrairement à la view, le routeur et le controller, un model est lié à des objets concrets : des potins ou <code>Gossip</code>. Donc autant leur donner directement ce nom là comme ça, pour créer un nouveau potin, on fera <code>Gossip.new</code>. Ce qui revient à créer une instance de la classe <code>Gossip</code>.</p>

<p>Voici ce que l'on veut que tu fasses concernant le controller :</p>

<ul>
  <li>Crée un fichier <code>controller.rb</code> dans le dossier <code>lib</code>.</li>
  <li>Mets les bases de la classe <code>Controller</code> dedans.</li>
  <li>Étant donné que le controller joue avec le model et la view, tu vas devoir les <code>require</code> au début du programme. </li>
  <li>Tu vas créer la méthode <code>create_gossip</code>. Cette méthode va donc créer un nouvel objet gossip, donc instancer la classe <code>Gossip</code> (le model) avec <code>Gossip.new</code>.</li>
  <li>C'est tout pour le moment. On verra comment pointer vers la view plus tard 😉</li>
</ul>

<p>Idem, si tu testes ton programme, il devrait t'envoyer bouler comme d'hab, en disant que la classe <code>Gossip</code> n'existe pas. C'est parti, créé ton fichier <code>gossip.rb</code> et nous allons créer en base les potins.</p>

<h4>2.2.4. Le model</h4>
<p>La classe <code>Gossip</code>, qui constituera le model, va permettre
 de créer plein d'instances qui seront autant de potins, de gossip : 
enfin on revient à un exemple de classe qui héberge des objets concrets !
 Mais le model aura aussi pour rôle d’interagir avec la base de données.
 Par exemple, pour la création, nous allons faire une méthode <code>save</code>
 qui ira écrire dans un fichier CSV notre instance de Gossip (notre 
potin quoi). Cela peut faire peur, mais c'est juste quelques lignes de 
code.</p>

<p>Déjà, notre potin aura deux variables d'instance que tu peux d'ores et déjà mettre en <code>attr_reader</code> : le <code>author</code> et le <code>content</code>.</p>
<p> Ces attributs seront déclarés à l'initialisation de façon classique. Rajoute ce code à la classe <code>Gossip</code> :</p>

<pre class=" language-ruby"><code class=" language-ruby"><span class="token keyword">def</span> initialize<span class="token punctuation">(</span>author<span class="token punctuation">,</span> content<span class="token punctuation">)</span>
  <span class="token inst-var">@content</span> <span class="token operator">=</span> content
  <span class="token inst-var">@author</span> <span class="token operator">=</span> author
<span class="token keyword">end</span></code></pre>

<p>Bon, grâce à ce code, si on fait <code>Gossip.new("moi", "coucou !")</code>,
 on peut créer un premier potin ! C'est un bon début, mais cela ne 
sauvegarde rien du tout dans notre CSV et du coup, l'information va 
disparaître quand le programme s'arrêtera de tourner. Il faudrait donc 
une méthode <code>save</code> qui enregistre dans la base de donnée l'instance de potin que l'on vient de créer. Nous allons faire cela.</p>

<p>En gros, quand on va vouloir créer un potin via le model <code>Gossip</code>, ça va se passer ainsi :</p>
<pre class=" language-ruby"><code class=" language-ruby">my_gossip <span class="token operator">=</span> <span class="token const">Gossip</span><span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">(</span><span class="token string">"auteur"</span><span class="token punctuation">,</span> <span class="token string">"ceci est un exemple content"</span><span class="token punctuation">)</span> <span class="token comment">#=&gt; Crée une instance de potin, sauvergardée juste dans cette variable
</span>my_gossip<span class="token punctuation">.</span>save <span class="token comment">#=&gt; Sauvegarde l'instance de potin dans le CSV correspondant, en créant une nouvelle ligne dans mon fichier CSV</span></code></pre>

<p>Notre base de données de potins sera rangée dans un fichier <code>gossip.csv</code> qui se trouve dans un dossier <code>db/</code> (cf. l'arborescence donnée au début). Chaque ligne correspond à un potin, avec en colonne 1 le <code>author</code> et en colonne 2 le <code>content</code>.</p>

<p>Maintenant tu vas coder la méthode <code>save</code> dans la classe <code>Gossip</code> de façon à ce que si on l'appelle, cela crée une <b>nouvelle</b> ligne (sans tout effacer !) dans le CSV qui contiendra en colonne 1 le <code>author</code> et en colonne 2 le <code>content</code> (séparés par une virgule donc, c'est le principe du CSV).</p>

<p>Tu veux tester ta classe <code>Gossip</code> pour savoir si les méthodes <code>initialize</code> et <code>save</code> sont bien codées ? Voici une façon de t'y prendre :</p>
<ul>
  <li>Rajoute un petit <code>require 'pry'</code> en haut de la classe ;</li>
  <li>Rajoute un petit <code>binding.pry</code> en bas de la classe ;</li>
  <li>Exécute le fichier <code>gossip.rb</code> depuis ton terminal ;</li>
  <li>Maintenant tu peux créer des objets gossip dans PRY. Par exemple : <code>my_gossip = Gossip.new('José', 'Josiane ne sait pas se battre')</code>. Ensuite tu peux aller voir si un <code>my_gossip.save</code> rajoute bien le gossip à ton CSV.</li>
  <li>Evidemment, enlève le <code>require</code> et le <code>binding.pry</code> une fois que tu as fini !</li>
</ul>

<h4>2.2.5. Retour rapide au controller</h4>
<p>Maintenant que le model est capable de créer un gossip et de le sauvegarder, retouche la méthode <code>create_gossip</code> dans le controller en y ajoutant les lignes suivantes :</p>

<pre class=" language-ruby"><code class=" language-ruby">gossip <span class="token operator">=</span> <span class="token const">Gossip</span><span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">(</span><span class="token string">"Jean-Michel Concierge"</span><span class="token punctuation">,</span> <span class="token string">"Féfé est de Bordeaux"</span><span class="token punctuation">)</span>
<span class="token comment">#pour le moment, le contenu de ce gossip est inscrit "en dur" dans le code. L'utilisateur ne peut pas le changer.
</span>
gossip<span class="token punctuation">.</span>save</code></pre>

<p>Si tout est bien branché, si tu lances ton programmes et fais le choix <code>1</code>
 dans le menu du routeur, tu devrais voir apparaître une ligne dans ton 
CSV avec les paramètres "Jean-Michel Concierge" et "Féfé est de 
Bordeaux"v". Ce qui, quand on y pense, est un super début : tu as réussi
 à brancher tout seul comme un grand un routeur, un controller, et les 
lier à une base de données via un model. Je n'ai quasiment rien fait. 
Joli 😘</p>

<p>Évidemment, ce n'est pas encore fini, puisqu'il faut pouvoir rentrer 
les potins en base en choississant l'auteur et le contenu (on veut un 
programme intéractif !) . Eh bien la view va s'occuper de gérer cela : 
on va l'appeler depuis le controller. </p>

<p>Est-ce que tu te rappelles comment on fait pour qu'une classe (<code>Controller</code>) passe la main à une autre (<code>View</code>)? Exactement de la même façon que le routeur a rediriger vers le controller ! Vérifie que tu as bien <code>require</code> la classe <code>View</code> à partir du controller, puis fais un petit <code>@view = View.new</code> dans l'initialize du controller. <br>
Maintenant, <b>au début</b> de la méthode <code>create_gossip</code> de <code>Controller</code>, on va appeler la classe <code>View</code> en faisant : <code>params = @view.create_gossip</code>. Et oui, pour ne pas nous emmêler trop les pinceaux, on va se débrouiller pour que la méthode <code>create_gossip</code> de la classe <code>Controller</code> soit liée à une méthode éponyme <code>create_gossip</code> de la classe <code>View</code>. Comme ça c'est facile de s'en rappeler.</p>

<p>Donc si je résume ce que fait la méthode <code>create_gossip</code> du controller :</p>
<ul>
  <li>Elle exécute la méthode <code>create_gossip</code> de la <code>View</code> afin de récupérer les infos de l'utilisateur (= le contenu et l'auteur du nouveau gossip) ;</li>
  <li>Elle créé une instance de <code>Gossip</code> avec <code>Gossip.new</code> (on verra comment injecter ici les infos saisies par l'utilisateur) ;</li>
  <li>Elle finit par demander au model de l'inscrire dans le CSV avec <code>gossip.save</code>.</li>
</ul>

<h4>2.2.6. La view</h4>
<p>Évidemment, si tu testes le programme, ce dernier va te saouler, car il faut créer le fichier <code>view.rb</code> et la classe <code>View</code>. Ça commence à être relou, MAIS ce sera la dernière fois aujourd'hui que tu vas faire cela. Promis. <br>
Une fois le fichier créé, l'arborescence de ton dossier devrait être identique à l'arborescence que j'avais proposée au début.</p>

<p>Alors réflechissons. Que voulons-nous que la méthode <code>create_gossip</code> de la classe <code>View</code> fasse ? Elle doit demander deux variables (l'auteur et le contenu) à l'utilisateur (via des <code>puts</code> et <code>gets.chomp</code>), puis retourner ces deux variables. C'est tout.</p>

<p>Pour le return des variables, je t'invite à le faire sous la forme d'un hash : <code>return params = { content: content_que_tu_viens_de_demander, author: author_que_tu_viens_de_demander }</code>.
 Pourquoi comme ceci ? Eh bien en général pour les interactions avec les
 utilisateurs, dans le web on utilise une variable qui s'appelle <code>params</code> et qui est sous le format hash. Et c'est bien d'avoir dès le début les bons termes. <br>
Bien entendu, tu aurais pu enlever <code>params =</code> ce qui aurait 
donné exactement le même résultat (une méthode retourne le contenu d'une
 variable, pas son nom), mais c'est pour plus de clarté, ce qui n'est 
jamais de refus quand on débute 😇</p>
<p>Je te laisse coder la méthode <code>create_gossip</code> de la classe <code>View</code></p>

<h4>2.2.7. Retour au controller</h4>
<p>Encore ? Eh oui, le controller est le chef d'orchestre, donc c'est 
normal d'y faire des aller-retours ! Maintenant, si ton programme est 
bien branché, la méthode <code>create_gossip</code> de <code>Controller</code> devrait avoir à sa disposition une variable <code>params</code> qui est un hash qui contient les informations que tu veux. </p>

<div class="card box-shadow-0 border-info">
  <div class="card-content collapse show">
    <div class="card-body">
      <h4 class="card-title">🚀 ALERTE BONNE ASTUCE</h4>
        <p>Galère de variable mal placée ? Tu ne sais pas trop comment jouer avec <code>params</code> ? N'oublie pas ma phrase préférée : "dans le doute, fous des <code>puts</code>". Et n'hésite pas à faire plein de tests avec PRY, très pratique pour jouer avec des variables récalcitrantes.</p>
    </div>
  </div>
</div>


<p>Maintenant, injecte les valeurs de ton hash <code>params</code> dans le <code>Gossip.new(author, content)</code>, et à toi la gloire !</p>

<h4>2.2.8. Création terminée !</h4>
<p>Waow ! Tu as réussi à faire –presque– tout seul une création de potin en MVC ! Si c'est pas classe ça, <i>then I don't know what is</i> 😎</p>

<p>On va pouvoir s'éclater avec la suite : nous allons afficher tous les
 potins, puis évidemment supprimer de la base les potins qui ne sont 
plus d'actualité. C'est parti !</p>

<h3>2.3. Afficher les potins</h3>
<p>Cette partie sera un peu moins pas à pas, mais quand même on va 
t'aider. Tout d'abord, avant de foncer tête baissée dans le code, nous 
allons réfléchir à ce qu'il faut.</p>

<p>Nous voudrions pouvoir, quand l'utilisateur le demande, afficher tous
 les potins en base. Cela veut dire : laisser la possibilité à 
l'utilisateur de choisir l'option <code>2. Afficher tous les potins</code> via le routeur, ce qui va le rediriger vers une méthode <code>index_gossips</code> de notre controller. Cette méthode <code>index_gossips</code>
 va demander au model de lui sortir tous les potins, puis les donner à 
la view pour qu'elle puisse les afficher. Du MVC dans toute sa 
splendeur. Allez, c'est parti !</p>

<h4>2.3.1. Le router</h4>
<p>C'est la partie la plus simple : il faut pouvoir dire à l'utilisateur qu'il peut choisir <code>2</code>, qui est le numéro pour afficher tous les potins. S'il choisit <code>2</code>, nous allons le rediriger vers la méthode <code>index_gossips</code> de notre controller.</p>

<h4>2.3.2. Le controller</h4>
<p>La méthode <code>index_gossips</code> du controller va faire deux choses :</p>
<ul>
  <li>Demander au model un array qui contient tous les potins que l'on a en base</li>
  <li>Demander à la view d’exécuter sa propre méthode <code>index_gossips</code> qui affichera tous les potins</li>
</ul>

<h4>2.3.3. Le model</h4>
<p>Pour ceci, nous allons utiliser une méthode qui s'appelle <code>self.all</code>, qui va lire chaque ligne du CSV, puis retourner un array contenant des <b>instances</b> de potins du genre : <code>[potin_1, potin_2, …, potin_n]</code>. J'insiste sur un point: il s'agit d'un <b>array d'objets de la classe <code>Gossip</code></b>. Donc si je fais <code>potin_1.author</code>, je récupère l'auteur du potin_1. Si je fais <code>potin_2.content</code>, je récupère le contenu du potin_2. Et ainsi de suite.</p>

<p>Comme ce n'est pas la méthode la plus simple, nous allons te donner le pseudo-code de la méthode <code>self.all</code>, pour t'aiguiller dans la recherche de l'array parfait :</p>

<pre class=" language-ruby"><code class=" language-ruby"><span class="token keyword">def</span> <span class="token keyword">self</span><span class="token punctuation">.</span>all
  <span class="token comment"># 1)création d'un array vide qui s'appelle all_gossips
</span>
  <span class="token comment"># 2)chaque ligne de ton CSV.each do |ligne|
</span>    <span class="token comment"># 2-a) gossip_provisoire = Gossip.new(paramètres de la ligne) - permet de créer un objet gossip
</span>    <span class="token comment"># 2-b) all_gossips &lt;&lt; gossip_provisoire - permet de rajouter le gossip provisoire au array
</span>  <span class="token comment"># end
</span>
  <span class="token comment"># 3)return all_gossips - on renvoie le résultat
</span><span class="token keyword">end</span></code></pre>

<div class="card box-shadow-0 border-success">
  <div class="card-content collapse show">
    <div class="card-body">
      <h4 class="card-title">🤓 QUESTION RÉCURRENTE</h4>
      <p><b>Mais dis donc Jamy, c'est quoi la différence entre <code>def truc</code> et <code>def self.truc</code> ?</b> Excellente question car cela peut porter à confusion la première fois qu'on l'utilise.</p>
      <p>On en a parlé dans le cours de POO: une méthode <code>def self.truc</code> est une méthode de classe qui s'appelle sur une classe entière (en faisant <code>NomDeTaClasse.truc</code>). Une méthode <code>def truc</code> est une méthode d'instance qui s'appelle sur une instance (en faisant <code>nom_de_l_instance.truc</code>).</p>
      <p>Prenons l'exemple de ton potin : si tu veux sauvegarder un potin <code>mon_potin</code> pour le mettre en base, tu ne vas pas faire <code>Gossip.save</code>, mais plutôt <code>mon_potin.save</code> (tu l'exécute sur l'instance que tu veux sauver). <b>La sauvegarde est plutôt une méthode d'instance</b>. <br>
      Idem pour retourner la liste des potins que tu as en base, tu ne vas pas faire <code>mon_potin.all</code>, mais plutôt <code>Gossip.all</code> (tu l'exécute sur la classe entière dont tu veux obtenir toutes les instances). <b>Récupérer toutes les instances en base est plutôt une méthode de classe</b>.</p>
      <p>Deuxième exemple (et on passe à la suite promis), si tu devais recoder la méthode <code>new</code> (à ne jamais faire), et bien tu ferais <code>self.new</code> car tu crées un potin en faisant <code>Gossip.new</code>, et non pas en faisant <code>mon_potin.new</code>.</p>
    </div>
  </div>
</div>


<h4>2.3.4. La view</h4>
<p>Maintenant que tu as un array qui contient tous les potins de ta 
base, tu as juste à la donner à la view, pour qu'elle les affiche. Une 
méthode <code>index_gossips(gossips)</code> qui contient l'array de tes potins en entrée (<code>gossips</code>) fera très bien l'affaire. En faisant faire à cette méthode un petit <code>.each</code> sur ton array, tu pourras <code>puts</code> chaque potin du array. Et voilà, tu as affiché les potins de ta base !</p>

<h4>2.3.5. Index terminé !</h4>
<p>Pfiou ! Tu es en grande forme aujourd'hui ! Tu commences à maîtriser 
super bien le MVC, et maintenant tu vas pouvoir passer à la 
fonctionnalité suivante : la possibilité de détruire un potin. 💣</p>

<h3>2.4. Destroy</h3>
<p>Pour cette dernière méthode, un peu plus complexe que les deux 
autres, nous allons te laisser gérer le truc, comme un grand. Il existe 
plein de méthodes différentes, mais en gros le programme va demander à 
l'utilisateur quel potin il veut supprimer, puis le programme le 
retirera ce potin du CSV. Et pas les autres 😝</p>

<h3>2.5. Et voilà</h3>
<p>Et bien bravo, tu as réussi à faire une application qui propose à 
l'utilisateur de balancer ses potins sur THP, en mode MVC. Bien joué, et
 on espère que tu débordes de fierté face à cette belle étape !</p>

<h2>3. Rendu attendu</h2>
<p>Tu devras rendre une application qui demande en boucle à 
l'utilisateur s'il veut afficher, créer, ou détruire des potins. Si tu 
fermes l'application, les données restent sauvegardées grâce à un 
système de gestion de base de données en CSV ou en JSON.</p>

<p>Voici l'arborescence du programme :</p>
<pre class=" language-shell"><code class=" language-shell">.
├── lib
│    ├── controller.rb
│    ├── gossip.rb
│    ├── router.rb
│    └── view.rb
├── db
│   └── gossip.csv
├── app.rb
├── Gemfile
└── Gemfile.lock</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>

</div>

      </div>
    </div>
<script type="text/javascript" id="hs-script-loader" src="s4j5_fichiers/9310539.js"></script><script type="text/javascript" id="">(function(e,c){if(!c.__SV){var l,h;window.mixpanel=c;c._i=[];c.init=function(q,r,f){function t(d,a){var g=a.split(".");2==g.length&&(d=d[g[0]],a=g[1]);d[a]=function(){d.push([a].concat(Array.prototype.slice.call(arguments,0)))}}var b=c;"undefined"!==typeof f?b=c[f]=[]:f="mixpanel";b.people=b.people||[];b.toString=function(d){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);d||(a+=" (stub)");return a};b.people.toString=function(){return b.toString(1)+".people (stub)"};l="disable time_event track track_pageview track_links track_forms track_with_groups add_group set_group remove_group register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking start_batch_senders people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user people.remove".split(" ");
for(h=0;h<l.length;h++)t(b,l[h]);var n="set set_once union unset remove delete".split(" ");b.get_group=function(){function d(p){a[p]=function(){call2_args=arguments;call2=[p].concat(Array.prototype.slice.call(call2_args,0));b.push([g,call2])}}for(var a={},g=["get_group"].concat(Array.prototype.slice.call(arguments,0)),m=0;m<n.length;m++)d(n[m]);return a};c._i.push([q,r,f])};c.__SV=1.2;var k=e.createElement("script");k.type="text/javascript";k.async=!0;k.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?
MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";e=e.getElementsByTagName("script")[0];e.parentNode.insertBefore(k,e)}})(document,window.mixpanel||[]);mixpanel.init("ab79c62023f2a925bfe5f7922c70de67");mixpanel.track("Sign up");</script>
<script type="text/javascript" id="">!function(){var a=window.analytics=window.analytics||[];if(!a.initialize)if(a.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{a.invoked=!0;a.methods="trackSubmit trackClick trackLink trackForm pageview identify reset group track ready alias debug page once off on addSourceMiddleware addIntegrationMiddleware setAnonymousId addDestinationMiddleware".split(" ");a.factory=function(b){return function(){var c=Array.prototype.slice.call(arguments);c.unshift(b);
a.push(c);return a}};for(var e=0;e<a.methods.length;e++){var f=a.methods[e];a[f]=a.factory(f)}a.load=function(b,c){var d=document.createElement("script");d.type="text/javascript";d.async=!0;d.src="https://cdn.segment.com/analytics.js/v1/"+b+"/analytics.min.js";b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(d,b);a._loadOptions=c};a._writeKey="HDfubo7D6T7lk8XiL2HZi2hZvIVFuK8j";a.SNIPPET_VERSION="4.13.2";a.load("HDfubo7D6T7lk8XiL2HZi2hZvIVFuK8j");a.page()}}();</script>



    <div class="thp-flashes"></div>



    <script src="s4j5_fichiers/dashboard-6681459c92372465340c.js"></script>
    <script charset="utf-8">
      $('input[name=authenticity_token]').val($('meta[name=csrf-token]').attr('content'));
    </script>

  

<iframe style="display: none; visibility: hidden;" owner="archetype" title="archetype"></iframe></body></html>